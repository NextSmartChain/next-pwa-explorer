{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js??ref--1-0!/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/components/core/FDataTable/FDataTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/components/core/FDataTable/FDataTable.vue","mtime":1657708592954},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL21udC93ZWJzaXRlcy9leC5uZXh0c21hcnRjaGFpbi5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCBGSGVhZFN0eWxlIGZyb20gJy4uL0ZIZWFkU3R5bGUvRkhlYWRTdHlsZS52dWUnOwppbXBvcnQgRlBhZ2luYXRpb24gZnJvbSAnLi4vRlBhZ2luYXRpb24vRlBhZ2luYXRpb24udnVlJzsKaW1wb3J0IHsgZ2V0TmVzdGVkUHJvcCwgaXNWYWxpZEluZGV4IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnOwppbXBvcnQgeyBjbG9uZU9iamVjdCwgaXNPYmplY3RFbXB0eSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJzsKaW1wb3J0IHsgb2JqMmNzcyB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJzsKaW1wb3J0IHsgaGVscGVyc01peGluIH0gZnJvbSAnLi4vLi4vLi4vbWl4aW5zL2hlbHBlcnMuanMnOwppbXBvcnQgZXZlbnRzIGZyb20gJy4uLy4uLy4uL21peGlucy9ldmVudHMuanMnOwppbXBvcnQgRkNhcmQgZnJvbSAnLi4vRkNhcmQvRkNhcmQudnVlJzsKaW1wb3J0IFB1bHNlTG9hZGVyIGZyb20gJ3Z1ZS1zcGlubmVyL3NyYy9QdWxzZUxvYWRlci52dWUnOwppbXBvcnQgeyBpc0FyaWFBY3Rpb24gfSBmcm9tICdAL3V0aWxzL2FyaWEuanMnOwppbXBvcnQgRkludGVyc2VjdGlvbk9ic2VydmVyIGZyb20gIkAvY29tcG9uZW50cy9jb3JlL0ZJbnRlcnNlY3Rpb25PYnNlcnZlci9GSW50ZXJzZWN0aW9uT2JzZXJ2ZXIudnVlIjsKdmFyIEdSSURfU1RPUkFHRV9LRVkgPSAnbmV4dC1kYXRhLWdyaWQnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRkludGVyc2VjdGlvbk9ic2VydmVyOiBGSW50ZXJzZWN0aW9uT2JzZXJ2ZXIsCiAgICBGQ2FyZDogRkNhcmQsCiAgICBGSGVhZFN0eWxlOiBGSGVhZFN0eWxlLAogICAgRlBhZ2luYXRpb246IEZQYWdpbmF0aW9uLAogICAgUHVsc2VMb2FkZXI6IFB1bHNlTG9hZGVyCiAgfSwKICBtaXhpbnM6IFtoZWxwZXJzTWl4aW4sIGV2ZW50c10sCiAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgLyoqCiAgICAgKiBBcnJheSBvZiBjb2x1bW5zIGRlc2NyaXB0aW9ucy4KICAgICAqCiAgICAgKiBPbmUgaXRlbSBpcyBhbiBvYmplY3Qgd2l0aCBrZXlzOgogICAgICogYG5hbWVgIHtzdHJpbmd9IC0gdW5pcXVlIG5hbWUgb2YgY29sdW1uIChyZXF1aXJlZCkuIENhbiBiZSB1c2VkIGFzIGEgZGF0YSBpdGVtIHByb3BlcnR5LgogICAgICogYGxhYmVsYCB7c3RyaW5nfSAtIGxhYmVsIG9mIGNvbHVtbiBwbGFjZWQgaW4gdGhlIGhlYWRlciBvZiB0YWJsZQogICAgICogYGl0ZW1Qcm9wYCB7c3RyaW5nfSAtIGNhbiBiZSB1c2VkIHRvIGdldCBkYXRhIGZyb20gbmVzdGVkIGRhdGEgaXRlbSBwcm9wZXJ0eSAtICdwcm9wMS5wcm9wMicgZm9yIGV4YW1wbGUKICAgICAqIGBmb3JtYXR0ZXJgIHtmdW5jdGlvbn0gLSBhcHBseSB0aGlzIGZvcm1hdHRlciB0byBkYXRhIGl0ZW0gdmFsdWUKICAgICAqIGByZWFkVmFsdWVGcm9tYCB7c3RyaW5nfSAtIGlmIHRoZXJlIGlzIG5vIGtleSBgbmFtZWAgaW4gZGF0YSBpdGVtIG9iamVjdCwgcmVhZCB2YWx1ZSBmcm9tIGNvbHVtbiB3aXRoIG5hbWUgYHZhbHVlYAogICAgICogYHdpZHRoYCB7c3RyaW5nfSAtIG1pbmltdW0gd2lkdGggb2YgY29sdW1uCiAgICAgKiBgaGlkZGVuYCB7Ym9vbGVhbn0gLSBpZiBgdHJ1ZWAsIGNvbHVtbiB3aWxsIGJlIGhpZGRlbgogICAgICogYGNzc2Age29iamVjdH0gLSBzdHlsZSBmb3Igd2hvbGUgY29sdW1uLiBLZXlzIGFyZSBjc3MgcHJvcGVydGllcyBpbiBjYW1lbCBjYXNlLCB2YWx1ZXMgYXJlIHZhbGlkIGNzcyB2YWx1ZXMuCiAgICAgKiBgY3NzQ2xhc3NgIHtzdHJpbmd9IC0gY3NzIGNsYXNzIHRvIGJlIGFkZGVkIHRvIGNvbHVtbgogICAgICogYGNlbGxDaGlsZHJlbkNzc2Age29iamVjdH0gLSBzdHlsZSBmb3IgY29sdW1uIGNlbGxzIGRpcmVjdCBjaGlsZHJlbi4gS2V5cyBhcmUgY3NzIHByb3BlcnRpZXMgaW4gY2FtZWwgY2FzZSwgdmFsdWVzIGFyZSB2YWxpZCBjc3MgdmFsdWVzLgogICAgICogYG9uZUxpbmVNb2RlYCB7Ym9vbGVhbn0gLSBpZiBgdHJ1ZWAsIG5vIGxpbmUgYnJlYWtzIGFyZSBhbGxvd2VkIGluIGNvbHVtbidzIGNlbGxzLgogICAgICovCiAgICBjb2x1bW5zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogQXJyYXkgb2YgdGFibGUgcm93cy4KICAgICAqCiAgICAgKiBPbmUgaXRlbSBpcyBhbiBvYmplY3QsIHdoZXJlIGtleXMgYXJlIGNvbHVtbiBuYW1lcy4KICAgICAqIFJlc2VydmVkIGtleXMgYXJlOgogICAgICogYGNzc2Age29iamVjdH0gLSBzdHlsZSBmb3Igd2hvbGUgcm93LiBLZXlzIGFyZSBjc3MgcHJvcGVydGllcyBpbiBjYW1lbCBjYXNlLCB2YWx1ZXMgYXJlIHZhbGlkIGNzcyB2YWx1ZXMuCiAgICAgKi8KICAgIGl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCgogICAgLyoqIEhlaWdodCBvZiBkYXRhIHRhYmxlLiAqLwogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2F1dG8nCiAgICB9LAoKICAgIC8qKiBBcnJheSBvZiBjb2x1bW4gbmFtZXMgdG8gYmUgaGlkZGVuLiAqLwogICAgaGlkZGVuQ29sdW1uczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogR3JpZCdzIGNvZGUgdXNlZCBmb3IgaWRlbnRpZmljYXRpb24gaW4gbG9jYWwgc3RvcmFnZQogICAgICovCiAgICBjb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBXaWR0aCBvZiBmaXJzdCBjb2x1bW4gaW4gbW9iaWxlIHZpZXcgKGZyb20gJzEnIHRvICcxMicpLgogICAgICogVXNlZCBpbiBtb2JpbGUgdmlldyBzbG90J3MgZGVmYXVsdCBjb250ZW50IG9ubHkuCiAgICAgKi8KICAgIGZpcnN0TVZDb2x1bW5XaWR0aDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICc0JwogICAgfSwKCiAgICAvKiogICovCiAgICBmaXhlZEhlYWRlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKiogRW5hYmxlIGluZmluaXRlIHNjcm9sbGluZy4gKi8KICAgIGluZmluaXRlU2Nyb2xsOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIG1pbmltdW0gZGlzdGFuY2UgYmV0d2VlbiB0aGUgYm90dG9tIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydAogICAgICogYmVmb3JlIHRoZSB2LWluZmluaXRlLXNjcm9sbCBtZXRob2QgaXMgZXhlY3V0ZWQuCiAgICAgKi8KICAgIGluZmluaXRlU2Nyb2xsRGlzdGFuY2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA4MDAKICAgIH0sCgogICAgLyoqICAqLwogICAgZGlzYWJsZUluZmluaXRlU2Nyb2xsOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCgogICAgLyoqIFNlcnZlciBzaWRlIHBhZ2luYXRpb24gYW5kIHNvcnRpbmcuICovCiAgICBzZXJ2ZXJTaWRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKiAgKi8KICAgIHVzZVBhZ2luYXRpb246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqIERpc3BsYXkgbG9hZGluZyBtZXNzYWdlLiAqLwogICAgbG9hZGluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKiogRGlzcGxheSBsb2FkaW5nIG1lc3NhZ2UsIGV2ZW4gaWYgaXRlbXMgZXhpc3QuICovCiAgICBmb3JjZUxvYWRpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqIFJlbmRlciBkYXRhIHRhYmxlIGluIG1vYmlsZSB2aWV3LiAqLwogICAgbW9iaWxlVmlldzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKiogSWYgYHRydWVgLCBubyBsaW5lIGJyZWFrcyBhcmUgYWxsb3dlZCBpbiB0YWJsZSBjZWxscy4gKi8KICAgIG9uZUxpbmVNb2RlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKiBJZiBgdHJ1ZWAsIGYtY2FyZCBlbGVtZW50IHdpbGwgYmUgd2l0aG91dCBhbnkgc3R5bGUuICovCiAgICBmQ2FyZE9mZjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKiogTm8gbGVmdCBwYWRkaW5nIG9uIHRoZSBmaXJzdCBjb2x1bW4gYW5kIHJpZ2h0IHBhZGRpbmcgb24gdGhlIGxhc3QgY29sdW1uLiAqLwogICAgbm9GTFBhZGRpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqIElmIGB0cnVlYCwgcm93IHdpbGwgYmVjb21lIGNsaWNrYWJsZSBhbmQgJ3Jvdy1hY3Rpb24nIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLiAqLwogICAgYWN0aW9uT25Sb3c6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqIElmIGB0cnVlYCBhbmQgYGNvZGVgIHByb3AgaXMgc2V0LCBzYXZlIGluZm8gYWJvdXQgc29ydGluZyB0byBsb2NhbCBzdG9yYWdlLiAqLwogICAgc2F2ZVNvcnRpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sIEZQYWdpbmF0aW9uLnByb3BzKSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZElkOiAidGJsIi5jb25jYXQodGhpcy5fdWlkKSwKICAgICAgZENzczogJycsCiAgICAgIGRQYWdpbmF0aW9uOiB7fSwKICAgICAgZFZpc2libGVDb2x1bW5zTnVtOiAwIC8vIGRJdGVtczogdGhpcy5pdGVtcwoKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLyoqCiAgICAgKiBQcm9wZXJ0eSBpcyBzZXQgdG8gYHRydWVgLCBpZiAnZGF0YS10YWJsZS1tb2JpbGUtdmlldycgYnJlYWtwb2ludCBpcyByZWFjaGVkLgogICAgICoKICAgICAqIEByZXR1cm4ge0Jvb2xlYW59CiAgICAgKi8KICAgIGNNb2JpbGVWaWV3OiBmdW5jdGlvbiBjTW9iaWxlVmlldygpIHsKICAgICAgdmFyIGRhdGFUYWJsZUJyZWFrcG9pbnQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5icmVha3BvaW50c1snZGF0YS10YWJsZS1tb2JpbGUtdmlldyddOwogICAgICByZXR1cm4gZGF0YVRhYmxlQnJlYWtwb2ludCAmJiBkYXRhVGFibGVCcmVha3BvaW50Lm1hdGNoZXMgfHwgdGhpcy5tb2JpbGVWaWV3OwogICAgfSwKCiAgICAvKioKICAgICAqIEdldCBpdGVtcyAocm93cykuIElmIHBhZ2luYXRpb24gaXMgdXNlZCwgcmV0dXJuIHByb3BlciBzbGljZSBvZiBpdGVtcy4KICAgICAqLwogICAgY0l0ZW1zOiBmdW5jdGlvbiBjSXRlbXMoKSB7CiAgICAgIHZhciBpdGVtc0luZGljZXMgPSB0aGlzLmRQYWdpbmF0aW9uLml0ZW1zSW5kaWNlczsKICAgICAgdGhpcy5zZXRJZHModGhpcy5pdGVtcyk7CgogICAgICBpZiAoIXRoaXMuc2VydmVyU2lkZSAmJiB0aGlzLnVzZVBhZ2luYXRpb24pIHsKICAgICAgICByZXR1cm4gaXRlbXNJbmRpY2VzID8gdGhpcy5pdGVtcy5zbGljZShpdGVtc0luZGljZXMuZnJvbSwgaXRlbXNJbmRpY2VzLnRvICsgMSkgOiBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmluaXRpYWxTb3J0KCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy5pdGVtczsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgbWF4LWhlaWdodCBvZiBkYXRhIHRhYmxlLgogICAgICovCiAgICBjSGVpZ2h0OiBmdW5jdGlvbiBjSGVpZ2h0KCkgewogICAgICBpZiAodGhpcy5oZWlnaHQgPT09ICdhdXRvJykgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgcmV0dXJuICJtYXgtaGVpZ2h0OiAiLmNvbmNhdCh0aGlzLmhlaWdodCk7CiAgICB9LAoKICAgIC8qKgogICAgICogQ29udGFpbmVyJ3MgY3NzIGNsYXNzZXMuCiAgICAgKi8KICAgIGNDc3NDbGFzczogZnVuY3Rpb24gY0Nzc0NsYXNzKCkgewogICAgICByZXR1cm4gewogICAgICAgICdmLWNhcmQtb24nOiAhdGhpcy5mQ2FyZE9mZiwKICAgICAgICAnaGVpZ2h0LXNldCc6IHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycsCiAgICAgICAgJ2ZpeGVkLWhlYWRlcic6IHRoaXMuZml4ZWRIZWFkZXIsCiAgICAgICAgJ25vLWZsLXBhZGRpbmcnOiB0aGlzLm5vRkxQYWRkaW5nIHx8ICF0aGlzLmZDYXJkT2ZmLAogICAgICAgICdhY3Rpb24tb24tcm93JzogdGhpcy5hY3Rpb25PblJvdwogICAgICB9OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY29sQ2xhc3NSRSA9IC9ccypfYyhcZClccyovOwogICAgdGhpcy5fc29ydEJ5Q29sID0gLTE7CiAgICB0aGlzLl9pbml0aWFsU29ydCA9IHRydWU7IC8vIFNldHRpbmdzIHN0b3JlZCBpbiBsb2NhbCBzdG9yYWdlLiBLZXlzIGFyZSBjb2RlcywgdmFsdWVzIGFyZSBzZXR0aW5ncy4KCiAgICB0aGlzLl9zZXR0aW5ncyA9IHRoaXMuZ2V0U3RvcmVkU2V0dGluZ3MoKTsKICAgIHRoaXMucHJlcGFyZUNvbHVtbnMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRpYWxTb3J0OiBmdW5jdGlvbiBpbml0aWFsU29ydCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLl9pbml0aWFsU29ydCkgewogICAgICAgIHRoaXMuX2luaXRpYWxTb3J0ID0gZmFsc2U7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgc29ydGluZyA9IF90aGlzLl9zZXR0aW5ncy5zb3J0aW5nOwogICAgICAgICAgdmFyIGNvbHVtbiA9IG51bGw7CgogICAgICAgICAgaWYgKHNvcnRpbmcpIHsKICAgICAgICAgICAgY29sdW1uID0gX3RoaXMuZ2V0Q29sdW1uQnlOYW1lKHNvcnRpbmcuc29ydEJ5KTsKCiAgICAgICAgICAgIGlmIChjb2x1bW4pIHsKICAgICAgICAgICAgICBfdGhpcy5zb3J0QnlDb2x1bW4oY29sdW1uLCBzb3J0aW5nLnNvcnREaXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLl9zb3J0QnlDb2wgPiAtMSkgewogICAgICAgICAgICBjb2x1bW4gPSBfdGhpcy5jb2x1bW5zW190aGlzLl9zb3J0QnlDb2xdOwoKICAgICAgICAgICAgX3RoaXMuc29ydEJ5Q29sdW1uKGNvbHVtbiwgY29sdW1uLnNvcnREaXIpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwKTsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFNldCBjb2x1bW5zIGNzcywgLi4uCiAgICAgKi8KICAgIHByZXBhcmVDb2x1bW5zOiBmdW5jdGlvbiBwcmVwYXJlQ29sdW1ucygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgY29sdW1ucyA9IHRoaXMuY29sdW1uczsKICAgICAgdmFyIGhpZGRlbkNvbHVtbnMgPSB0aGlzLmhpZGRlbkNvbHVtbnMubGVuZ3RoID4gMCA/IHRoaXMuaGlkZGVuQ29sdW1ucyA6IG51bGw7CiAgICAgIHZhciBjc3NTdHIgPSAnJzsKICAgICAgdmFyIGRWaXNpYmxlQ29sdW1uc051bSA9IDA7CiAgICAgIHZhciBmaXJzdFZpc2libGUgPSBmYWxzZTsKICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChfY29sdW1uLCBfaW5kZXgpIHsKICAgICAgICB2YXIgY3NzID0ge307CiAgICAgICAgdmFyIGNlbGxDaGlsZHJlbkNzcyA9IHt9OwogICAgICAgIF9jb2x1bW4uX2luZGV4ID0gX2luZGV4OwoKICAgICAgICBpZiAoX2NvbHVtbi5zb3J0RGlyKSB7CiAgICAgICAgICBfdGhpczIuX3NvcnRCeUNvbCA9IF9pbmRleDsKICAgICAgICB9CgogICAgICAgIGlmIChoaWRkZW5Db2x1bW5zICYmIGhpZGRlbkNvbHVtbnMuaW5kZXhPZihfY29sdW1uLm5hbWUpID4gLTEpIHsKICAgICAgICAgIF9jb2x1bW4uaGlkZGVuID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmICghX2NvbHVtbi5oaWRkZW4pIHsKICAgICAgICAgIGRWaXNpYmxlQ29sdW1uc051bSsrOwoKICAgICAgICAgIGlmICghZmlyc3RWaXNpYmxlKSB7CiAgICAgICAgICAgIGZpcnN0VmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIF9jb2x1bW4uY3NzQ2xhc3MgPSAiIi5jb25jYXQoX2NvbHVtbi5jc3NDbGFzcyB8fCAnJywgIiBmLWNvbCIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKF9jb2x1bW4ud2lkdGgpIHsKICAgICAgICAgIGNzcy53aWR0aCA9IF9jb2x1bW4ud2lkdGg7CiAgICAgICAgICBjc3MubWluV2lkdGggPSBjc3Mud2lkdGg7CiAgICAgICAgfSBlbHNlIGlmIChfY29sdW1uLm1pbldpZHRoKSB7CiAgICAgICAgICBjc3MubWluV2lkdGggPSBfY29sdW1uLm1pbldpZHRoOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9jb2x1bW4uY3NzKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGNzcywgX2NvbHVtbi5jc3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9jb2x1bW4uY2VsbENoaWxkcmVuQ3NzKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGNlbGxDaGlsZHJlbkNzcywgX2NvbHVtbi5jZWxsQ2hpbGRyZW5Dc3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzMi5vbmVMaW5lTW9kZSB8fCBfY29sdW1uLm9uZUxpbmVNb2RlKSB7CiAgICAgICAgICB2YXIgdGhyZWVEb3RzID0gewogICAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJywKICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLAogICAgICAgICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycKICAgICAgICAgIH07CiAgICAgICAgICBPYmplY3QuYXNzaWduKGNzcywgdGhyZWVEb3RzKTsgLy8gT2JqZWN0LmFzc2lnbihjZWxsQ2hpbGRyZW5Dc3MsIHRocmVlRG90cyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzT2JqZWN0RW1wdHkoY3NzKSkgewogICAgICAgICAgY3NzU3RyICs9ICIjIi5jb25jYXQoX3RoaXMyLmRJZCwgIiAuIikuY29uY2F0KF90aGlzMi5nZXRDb2x1bW5DbGFzcyhfaW5kZXgpLCAiIHsiKS5jb25jYXQob2JqMmNzcyhjc3MpLCAifSIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc09iamVjdEVtcHR5KGNlbGxDaGlsZHJlbkNzcykpIHsKICAgICAgICAgIGNzc1N0ciArPSAiIyIuY29uY2F0KF90aGlzMi5kSWQsICIgLiIpLmNvbmNhdChfdGhpczIuZ2V0Q29sdW1uQ2xhc3MoX2luZGV4KSwgIiA+ICogeyIpLmNvbmNhdChvYmoyY3NzKGNlbGxDaGlsZHJlbkNzcyksICJ9Iik7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgaWYgKCFjb2x1bW5zW2ldLmhpZGRlbikgewogICAgICAgICAgY29sdW1uc1tpXS5jc3NDbGFzcyA9ICIiLmNvbmNhdChjb2x1bW5zW2ldLmNzc0NsYXNzIHx8ICcnLCAiIGwtY29sIik7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChjc3NTdHIpIHsKICAgICAgICB0aGlzLmRDc3MgPSBjc3NTdHI7CiAgICAgIH0KCiAgICAgIGlmIChkVmlzaWJsZUNvbHVtbnNOdW0gPiAwKSB7CiAgICAgICAgdGhpcy5kVmlzaWJsZUNvbHVtbnNOdW0gPSBkVmlzaWJsZUNvbHVtbnNOdW07CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBGZXRjaCBtb3JlIGRhdGEuCiAgICAgKi8KICAgIGZldGNoTW9yZTogZnVuY3Rpb24gZmV0Y2hNb3JlKF92aXNpYmxlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRlci12aXNpYmlsaXR5JywgX3Zpc2libGUpOwoKICAgICAgaWYgKF92aXNpYmxlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnZmV0Y2gtbW9yZScpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogQHBhcmFtIHtpbnR9IF9pbmRleAogICAgICogQHBhcmFtIHtvYmplY3R9IF9kYXRhCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICB1cGRhdGVSb3c6IGZ1bmN0aW9uIHVwZGF0ZVJvdyhfaW5kZXgsIF9kYXRhKSB7CiAgICAgIGlmIChpc1ZhbGlkSW5kZXgoX2luZGV4LCB0aGlzLml0ZW1zKSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLml0ZW1zLCBfaW5kZXgsIF9kYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKCiAgICAvKioKICAgICAqIEBwYXJhbSB7aW50fSBfcm93SW5kZXgKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfY29sTmFtZQogICAgICogQHBhcmFtIHsqfSBfZGF0YQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgdXBkYXRlQ2VsbDogZnVuY3Rpb24gdXBkYXRlQ2VsbChfcm93SW5kZXgsIF9jb2xOYW1lLCBfZGF0YSkgewogICAgICBpZiAoaXNWYWxpZEluZGV4KF9yb3dJbmRleCwgdGhpcy5pdGVtcykpIHsKICAgICAgICAvLyAmJiBfY29sTmFtZSBpbiBjb2x1bW5zQnlOYW1lIChvYmplY3QpISEKICAgICAgICB0aGlzLiRzZXQodGhpcy5pdGVtc1tfcm93SW5kZXhdLCBfY29sTmFtZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIC8qKgogICAgICogR2V0IGNvbHVtbidzIGNzcyBjbGFzcy4KICAgICAqCiAgICAgKiBAcGFyYW0ge2ludH0gX2luZGV4CiAgICAgKiBAcGFyYW0ge29iamVjdH0gW19jb2x1bW5dCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldENvbHVtbkNsYXNzOiBmdW5jdGlvbiBnZXRDb2x1bW5DbGFzcyhfaW5kZXgsIF9jb2x1bW4pIHsKICAgICAgcmV0dXJuICJfYyIuY29uY2F0KF9pbmRleCwgIiAiKSArIChfY29sdW1uICYmIF9jb2x1bW4uY3NzQ2xhc3MgPyBfY29sdW1uLmNzc0NsYXNzIDogJycpOwogICAgfSwKCiAgICAvKioKICAgICAqIEdldCBoZWFkaW5nIGNvbHVtbidzIGNzcyBjbGFzc2VzLgogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbX2NvbHVtbl0KICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgZ2V0SGVhZGluZ0NvbHVtbkNsYXNzOiBmdW5jdGlvbiBnZXRIZWFkaW5nQ29sdW1uQ2xhc3MoX2NvbHVtbikgewogICAgICBpZiAoX2NvbHVtbi5zb3J0RnVuYykgewogICAgICAgIHJldHVybiAic29ydGFibGUgIi5jb25jYXQoX2NvbHVtbi5zb3J0RGlyIHx8ICcnKTsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfSwKCiAgICAvKioKICAgICAqIEdldCBjb2x1bW4gYnkgaXRzIGNzcyBjbGFzcy4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2NsYXNzCiAgICAgKiBAcmV0dXJuIHtvYmplY3R9CiAgICAgKi8KICAgIGdldENvbHVtbkJ5Q2xhc3M6IGZ1bmN0aW9uIGdldENvbHVtbkJ5Q2xhc3MoX2NsYXNzKSB7CiAgICAgIHZhciBtYXRjaCA9IHRoaXMuY29sQ2xhc3NSRS5leGVjKF9jbGFzcyk7CiAgICAgIHZhciBjb2x1bW4gPSBudWxsOwoKICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA9PT0gMikgewogICAgICAgIGNvbHVtbiA9IHRoaXMuY29sdW1uc1twYXJzZUludChtYXRjaFsxXSldIHx8IG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb2x1bW47CiAgICB9LAogICAgZ2V0Q29sdW1uQnlOYW1lOiBmdW5jdGlvbiBnZXRDb2x1bW5CeU5hbWUobmFtZSkgewogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmZpbmQoZnVuY3Rpb24gKGNvbHVtbikgewogICAgICAgIHJldHVybiBjb2x1bW4ubmFtZSA9PT0gbmFtZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICogR2V0IGRhdGEgaXRlbSB2YWx1ZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gX2l0ZW0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfY29sCiAgICAgKiBAcmV0dXJuIHsqfQogICAgICovCiAgICBnZXRJdGVtUHJvcFZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtUHJvcFZhbHVlKF9pdGVtLCBfY29sKSB7CiAgICAgIHZhciB2YWx1ZTsKCiAgICAgIGlmIChfY29sLml0ZW1Qcm9wKSB7CiAgICAgICAgdmFsdWUgPSBnZXROZXN0ZWRQcm9wKF9pdGVtLCBfY29sLml0ZW1Qcm9wKTsKICAgICAgfSBlbHNlIGlmIChfY29sLnJlYWRWYWx1ZUZyb20pIHsKICAgICAgICB2YWx1ZSA9IF9pdGVtW19jb2wucmVhZFZhbHVlRnJvbV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgPSBfaXRlbVtfY29sLm5hbWVdOwogICAgICB9CgogICAgICBpZiAoX2NvbC5mb3JtYXR0ZXIgJiYgIV9jb2wuaGlkZGVuKSB7CiAgICAgICAgdmFsdWUgPSBfY29sLmZvcm1hdHRlcih2YWx1ZSwgX2l0ZW0pOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAoKICAgIC8qKgogICAgICogU29ydCB0YWJsZSBieSBjb2x1bW4uCiAgICAgKgogICAgICogQHBhcmFtIHtPYmplY3R9IF9jb2x1bW4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbX3NvcnREaXJdICdhc2MnfCdkZXNjJwogICAgICogQHBhcmFtIHtib29sZWFufSBbX2NsaWNrXQogICAgICovCiAgICBzb3J0QnlDb2x1bW46IGZ1bmN0aW9uIHNvcnRCeUNvbHVtbihfY29sdW1uLCBfc29ydERpciwgX2NsaWNrKSB7CiAgICAgIGlmIChfY29sdW1uICYmIF9jb2x1bW4uc29ydEZ1bmMpIHsKICAgICAgICB2YXIgc29ydEJ5Q29sID0gdGhpcy5fc29ydEJ5Q29sOwoKICAgICAgICBpZiAoc29ydEJ5Q29sID4gLTEgJiYgc29ydEJ5Q29sICE9PSBfY29sdW1uLl9pbmRleCkgewogICAgICAgICAgdGhpcy5jb2x1bW5zW3NvcnRCeUNvbF0uc29ydERpciA9ICcnOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9zb3J0RGlyKSB7CiAgICAgICAgICBfY29sdW1uLnNvcnREaXIgPSBfc29ydERpcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGVmYXVsdCBzb3J0IG9uIGNvbHVtbiBoZWFkZXIgY2xpY2sgaXMgJ2Rlc2MnCiAgICAgICAgICBpZiAoX2NvbHVtbi5zb3J0RGlyID09PSAnZGVzYycpIHsKICAgICAgICAgICAgX2NvbHVtbi5zb3J0RGlyID0gJ2FzYyc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfY29sdW1uLnNvcnREaXIgPSAnZGVzYyc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9zb3J0QnlDb2wgPSBfY29sdW1uLl9pbmRleDsKCiAgICAgICAgaWYgKF9jbGljayAmJiB0aGlzLmNvZGUgJiYgdGhpcy5zYXZlU29ydGluZykgewogICAgICAgICAgdmFyIHNvcnRpbmcgPSB7CiAgICAgICAgICAgIHNvcnRCeTogX2NvbHVtbi5uYW1lLAogICAgICAgICAgICBzb3J0RGlyOiBfY29sdW1uLnNvcnREaXIKICAgICAgICAgIH07CiAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSBzb3J0aW5nJywgc29ydGluZyk7CiAgICAgICAgICB0aGlzLnNhdmVTZXR0aW5ncyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuX3NldHRpbmdzKSwge30sIHsKICAgICAgICAgICAgc29ydGluZzogc29ydGluZwogICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5pdGVtcy5zb3J0KF9jb2x1bW4uc29ydEZ1bmMoX2NvbHVtbi5pdGVtUHJvcCB8fCBfY29sdW1uLm5hbWUsIF9jb2x1bW4uc29ydERpcikpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogQHJldHVybiB7T2JqZWN0fQogICAgICovCiAgICBnZXRTdG9yZWRTZXR0aW5nczogZnVuY3Rpb24gZ2V0U3RvcmVkU2V0dGluZ3MoKSB7CiAgICAgIHZhciBfd2luZG93ID0gd2luZG93LAogICAgICAgICAgbG9jYWxTdG9yYWdlID0gX3dpbmRvdy5sb2NhbFN0b3JhZ2U7CiAgICAgIHZhciBzZXR0aW5ncyA9IHt9OwoKICAgICAgaWYgKHRoaXMuY29kZSAmJiBsb2NhbFN0b3JhZ2UpIHsKICAgICAgICB2YXIgZ3JpZFNldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShHUklEX1NUT1JBR0VfS0VZKSB8fCAne30nKTsKCiAgICAgICAgaWYgKGdyaWRTZXR0aW5ncyAmJiBncmlkU2V0dGluZ3NbdGhpcy5jb2RlXSkgewogICAgICAgICAgc2V0dGluZ3MgPSBncmlkU2V0dGluZ3NbdGhpcy5jb2RlXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzZXR0aW5nczsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MKICAgICAqLwogICAgc2F2ZVNldHRpbmdzOiBmdW5jdGlvbiBzYXZlU2V0dGluZ3Moc2V0dGluZ3MpIHsKICAgICAgdmFyIF93aW5kb3cyID0gd2luZG93LAogICAgICAgICAgbG9jYWxTdG9yYWdlID0gX3dpbmRvdzIubG9jYWxTdG9yYWdlOwoKICAgICAgaWYgKHRoaXMuY29kZSAmJiBsb2NhbFN0b3JhZ2UpIHsKICAgICAgICB2YXIgZ3JpZFNldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShHUklEX1NUT1JBR0VfS0VZKSB8fCAne30nKTsKICAgICAgICBncmlkU2V0dGluZ3NbdGhpcy5jb2RlXSA9IHNldHRpbmdzOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEdSSURfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGdyaWRTZXR0aW5ncykpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogQHBhcmFtIHtFdmVudH0gX2V2ZW50CiAgICAgKi8KICAgIG9uVGFibGVDbGljazogZnVuY3Rpb24gb25UYWJsZUNsaWNrKF9ldmVudCkgewogICAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqLwogICAgICB2YXIgZWxlbTsKCiAgICAgIGlmICh0aGlzLmFjdGlvbk9uUm93KSB7CiAgICAgICAgZWxlbSA9IF9ldmVudC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtZHQtaXRlbS1pZF0nKTsKCiAgICAgICAgaWYgKGVsZW0pIHsKICAgICAgICAgIHZhciBpZCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWR0LWl0ZW0taWQnKTsKICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtcy5maW5kKGZ1bmN0aW9uIChfaXRlbSkgewogICAgICAgICAgICByZXR1cm4gX2l0ZW0uaWQgPT09IGlkOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgncm93LWFjdGlvbicsIF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IF9ldmVudAogICAgICovCiAgICBvblRhYmxldEtleXVwOiBmdW5jdGlvbiBvblRhYmxldEtleXVwKF9ldmVudCkgewogICAgICBpZiAoaXNBcmlhQWN0aW9uKF9ldmVudCkpIHsKICAgICAgICB0aGlzLm9uVGFibGVDbGljayhfZXZlbnQpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogQHBhcmFtIHtFdmVudH0gX2V2ZW50CiAgICAgKi8KICAgIG9uSGVhZGVyQ2xpY2s6IGZ1bmN0aW9uIG9uSGVhZGVyQ2xpY2soX2V2ZW50KSB7CiAgICAgIHZhciBlbGVtID0gX2V2ZW50LnRhcmdldC5jbG9zZXN0KCd0aCcpOwoKICAgICAgdmFyIGNvbHVtbiA9IGVsZW0gPyB0aGlzLmdldENvbHVtbkJ5Q2xhc3MoZWxlbS5jbGFzc05hbWUpIDogbnVsbDsKICAgICAgdGhpcy5zb3J0QnlDb2x1bW4oY29sdW1uLCAnJywgdHJ1ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogVHJpZ2dlcmVkIG9uIGBGUGFnaW5hdGlvbmAncyBgJ3BhZ2UtY2hhbmdlJ2AgZXZlbnQuCiAgICAgKgogICAgICogQHBhcmFtIHtPYmplY3R9IF9kYXRhCiAgICAgKi8KICAgIG9uUGFnZUNoYW5nZTogZnVuY3Rpb24gb25QYWdlQ2hhbmdlKF9kYXRhKSB7CiAgICAgIHRoaXMuZFBhZ2luYXRpb24gPSBjbG9uZU9iamVjdChfZGF0YS5kZXRhaWwpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBwYXJhbSB7SW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeX0gX2VudHJ5CiAgICAgKi8KICAgIG9uRW50cnk6IGZ1bmN0aW9uIG9uRW50cnkoX2VudHJ5KSB7CiAgICAgIHRoaXMuZmV0Y2hNb3JlKF9lbnRyeS5pc0ludGVyc2VjdGluZyk7CiAgICB9LAoKICAgIC8qKgogICAgICogQ29udmVydCBvYmplY3QsIHdoZXJlIGtleXMgYXJlIGNzcyBwcm9wZXJ0aWVzLCB0byBzdHJpbmcuCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IF9jc3NPYmoKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgb2JqMmNzczogb2JqMmNzcwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;EACAA;IACAC,4CADA;IAEAC,YAFA;IAGAC,sBAHA;IAIAC,wBAJA;IAKAC;EALA,CADA;EASAC,8BATA;EAWAC;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACAC,WADA;MAEAC,cAFA;MAGAC,OAHA,sBAGA;QACA;MACA;IALA,CAjBA;;IAyBA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACAH,WADA;MAEAE,OAFA,sBAEA;QACA;MACA;IAJA,CAhCA;;IAuCA;IACAE;MACAJ,YADA;MAEAE;IAFA,CAxCA;;IA6CA;IACAG;MACAL,WADA;MAEAE,OAFA,sBAEA;QACA;MACA;IAJA,CA9CA;;IAqDA;AACA;AACA;IACAI;MACAN,YADA;MAEAE;IAFA,CAxDA;;IA6DA;AACA;AACA;AACA;IACAK;MACAP,YADA;MAEAE;IAFA,CAjEA;;IAsEA;IACAM;MACAR,aADA;MAEAE;IAFA,CAvEA;;IA4EA;IACAO;MACAT,aADA;MAEAE;IAFA,CA7EA;;IAkFA;AACA;AACA;AACA;IACAQ;MACAV,YADA;MAEAE;IAFA,CAtFA;;IA2FA;IACAS;MACAX,aADA;MAEAE;IAFA,CA5FA;;IAiGA;IACAU;MACAZ,aADA;MAEAE;IAFA,CAlGA;;IAuGA;IACAW;MACAb,aADA;MAEAE;IAFA,CAxGA;;IA6GA;IACAY;MACAd,aADA;MAEAE;IAFA,CA9GA;;IAmHA;IACAa;MACAf,aADA;MAEAE;IAFA,CApHA;;IAyHA;IACAc;MACAhB,aADA;MAEAE;IAFA,CA1HA;;IA+HA;IACAe;MACAjB,aADA;MAEAE;IAFA,CAhIA;;IAqIA;IACAgB;MACAlB,aADA;MAEAE;IAFA,CAtIA;;IA2IA;IACAiB;MACAnB,aADA;MAEAE;IAFA,CA5IA;;IAiJA;IACAkB;MACApB,aADA;MAEAE;IAFA,CAlJA;;IAuJA;IACAmB;MACArB,aADA;MAEAE;IAFA;EAxJA,GA6JAP,iBA7JA,CAXA;EA2KA2B,IA3KA,kBA2KA;IACA;MACAC,4BADA;MAEAC,QAFA;MAGAC,eAHA;MAIAC,qBAJA,CAKA;;IALA;EAOA,CAnLA;EAqLAC;IACA;AACA;AACA;AACA;AACA;IACAC,WANA,yBAMA;MACA;MAEA;IACA,CAVA;;IAYA;AACA;AACA;IACAC,MAfA,oBAeA;MACA;MAEA;;MAEA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA;;QAEA;MACA;IACA,CA7BA;;IA+BA;AACA;AACA;IACAC,OAlCA,qBAkCA;MACA;QACA;MACA;;MAEA;IACA,CAxCA;;IA0CA;AACA;AACA;IACAC,SA7CA,uBA6CA;MACA;QACA,2BADA;QAEA,oCAFA;QAGA,gCAHA;QAIA,mDAJA;QAKA;MALA;IAOA;EArDA,CArLA;EA6OAC,OA7OA,qBA6OA;IACA;IACA;IACA,yBAHA,CAIA;;IACA;IAEA;EACA,CArPA;EAuPAC;IACAC,WADA,yBACA;MAAA;;MACA;QACA;QAEAC;UACA;UACA;;UAEA;YACAC;;YACA;cACA;YACA;UACA,CALA,MAKA;YACAA;;YACA;UACA;QACA,CAbA,EAaA,EAbA;MAcA;IACA,CApBA;;IAsBA;AACA;AACA;IACAC,cAzBA,4BAyBA;MAAA;;MACA;MACA;MACA;MACA;MACA;MAEAtC;QACA;QACA;QAEAuC;;QAEA;UACA;QACA;;QAEA;UACAA;QACA;;QAEA;UACAZ;;UAEA;YACAa;YAEAD;UACA;QACA;;QAEA;UACAE;UACAA;QACA,CAHA,MAGA;UACAA;QACA;;QAEA;UACAC;QACA;;QAEA;UACAA;QACA;;QAEA;UACA;YACAC,oBADA;YAEAC,kBAFA;YAGAC;UAHA;UAMAH,8BAPA,CAQA;QACA;;QAEA;UACAI;QACA;;QAEA;UACAA;QACA;MACA,CAzDA;;MA2DA;QACA;UACA9C;UACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;MACA;IACA,CAzGA;;IA2GA;AACA;AACA;IACA+C,SA9GA,qBA8GAC,QA9GA,EA8GA;MACA;;MAEA;QACA;MACA;IACA,CApHA;;IAsHA;AACA;AACA;AACA;AACA;IACAC,SA3HA,qBA2HAC,MA3HA,EA2HAC,KA3HA,EA2HA;MACA;QACA;QACA;MACA;;MAEA;IACA,CAlIA;;IAoIA;AACA;AACA;AACA;AACA;AACA;IACAC,UA1IA,sBA0IAC,SA1IA,EA0IAC,QA1IA,EA0IAH,KA1IA,EA0IA;MACA;QACA;QACA;QACA;MACA;;MAEA;IACA,CAlJA;;IAoJA;AACA;AACA;AACA;AACA;AACA;AACA;IACAI,cA3JA,0BA2JAL,MA3JA,EA2JAX,OA3JA,EA2JA;MACA;IACA,CA7JA;;IA+JA;AACA;AACA;AACA;AACA;AACA;IACAiB,qBArKA,iCAqKAjB,OArKA,EAqKA;MACA;QACA;MACA;;MAEA;IACA,CA3KA;;IA6KA;AACA;AACA;AACA;AACA;AACA;IACAkB,gBAnLA,4BAmLAC,MAnLA,EAmLA;MACA;MACA;;MAEA;QACArB;MACA;;MAEA;IACA,CA5LA;IA8LAsB,eA9LA,2BA8LAC,IA9LA,EA8LA;MACA;QAAA;MAAA;IACA,CAhMA;;IAkMA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC,gBAzMA,4BAyMAC,KAzMA,EAyMAC,IAzMA,EAyMA;MACA;;MAEA;QACAC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MAEA;QACAA;MACA;;MAEA;IACA,CAzNA;;IA2NA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC,YAlOA,wBAkOA1B,OAlOA,EAkOA2B,QAlOA,EAkOAC,MAlOA,EAkOA;MACA;QACA;;QAEA;UACA;QACA;;QAEA;UACA5B;QACA,CAFA,MAEA;UACA;UACA;YACAA;UACA,CAFA,MAEA;YACAA;UACA;QACA;;QAEA;;QAEA;UACA;YACA6B,oBADA;YAEAC;UAFA;UAKAC;UACA;YAAAC;UAAA;QACA;;QAEA;MACA;IACA,CAnQA;;IAqQA;AACA;AACA;IACAC,iBAxQA,+BAwQA;MACA;MAAA;MACA;;MAEA;QACA;;QAEA;UACAC;QACA;MACA;;MAEA;IACA,CArRA;;IAuRA;AACA;AACA;IACAC,YA1RA,wBA0RAD,QA1RA,EA0RA;MACA;MAAA;;MAEA;QACA;QAEAE;QAEAC;MACA;IACA,CApSA;;IAsSA;AACA;AACA;IACAC,YAzSA,wBAySAC,MAzSA,EAySA;MACA;MACA;;MAEA;QACAC;;QACA;UACA;UACA;YAAA;UAAA;;UAEA;YACA;UACA;QACA;MACA;IACA,CAxTA;;IA0TA;AACA;AACA;IACAC,aA7TA,yBA6TAF,MA7TA,EA6TA;MACA;QACA;MACA;IACA,CAjUA;;IAmUA;AACA;AACA;IACAG,aAtUA,yBAsUAH,MAtUA,EAsUA;MACA;;MACA;MAEA;IACA,CA3UA;;IA6UA;AACA;AACA;AACA;AACA;IACAI,YAlVA,wBAkVA/B,KAlVA,EAkVA;MACA;IACA,CApVA;;IAsVA;AACA;AACA;IACAgC,OAzVA,mBAyVAC,MAzVA,EAyVA;MACA;IACA,CA3VA;;IA6VA;AACA;AACA;AACA;AACA;AACA;IACAC;EAnWA;AAvPA","names":["components","FIntersectionObserver","FCard","FHeadStyle","FPagination","PulseLoader","mixins","props","columns","type","required","default","items","height","hiddenColumns","code","firstMVColumnWidth","fixedHeader","infiniteScroll","infiniteScrollDistance","disableInfiniteScroll","serverSide","usePagination","loading","forceLoading","mobileView","oneLineMode","fCardOff","noFLPadding","actionOnRow","saveSorting","data","dId","dCss","dPagination","dVisibleColumnsNum","computed","cMobileView","cItems","cHeight","cCssClass","created","methods","initialSort","setTimeout","column","prepareColumns","_column","firstVisible","css","Object","whiteSpace","overflow","textOverflow","cssStr","fetchMore","_visible","updateRow","_index","_data","updateCell","_rowIndex","_colName","getColumnClass","getHeadingColumnClass","getColumnByClass","_class","getColumnByName","name","getItemPropValue","_item","_col","value","sortByColumn","_sortDir","_click","sortBy","sortDir","console","sorting","getStoredSettings","settings","saveSettings","gridSettings","localStorage","onTableClick","_event","elem","onTabletKeyup","onHeaderClick","onPageChange","onEntry","_entry","obj2css"],"sourceRoot":"src/components/core/FDataTable","sources":["FDataTable.vue"],"sourcesContent":["<template>\n    <f-card :off=\"fCardOff\" class=\"f-data-table-card\">\n        <div :id=\"dId\" class=\"f-data-table\" :class=\"cCssClass\" @page-change=\"onPageChange\">\n            <slot name=\"before-table\">\n                <div v-if=\"usePagination\" class=\"before-table\">\n                    <f-pagination\n                        :total-items=\"totalItems\"\n                        :items-per-page=\"itemsPerPage\"\n                        :curr-page=\"currPage\"\n                    ></f-pagination>\n                </div>\n            </slot>\n            <div\n                v-if=\"columns.length\"\n                class=\"table-container\"\n                :style=\"cHeight\"\n                @click=\"onTableClick\"\n                @keyup=\"onTabletKeyup\"\n            >\n                <table v-if=\"!cMobileView\">\n                    <slot name=\"header\">\n                        <thead>\n                            <tr @click=\"onHeaderClick\">\n                                <th\n                                    v-for=\"(col, index) in columns\"\n                                    v-show=\"!col.hidden\"\n                                    :key=\"col.name\"\n                                    :class=\"getColumnClass(index, col) + ' ' + getHeadingColumnClass(col)\"\n                                >\n                                    <div>{{ col.label }}</div>\n                                </th>\n                            </tr>\n                        </thead>\n                    </slot>\n                    <slot>\n                        <tbody v-if=\"cItems.length\">\n                        <template v-for=\"item in cItems\">\n                            <tr\n                                :key=\"item.id\"\n                                :style=\"item.css ? obj2css(item.css) : ''\"\n                                :data-dt-item-id=\"actionOnRow ? item.id : undefined\"\n                                :tabindex=\"actionOnRow ? 0 : -1\"\n                            >\n                                <td\n                                    v-for=\"(col, index) in columns\"\n                                    v-show=\"!col.hidden\"\n                                    :key=\"col.name\"\n                                    :class=\"getColumnClass(index, col)\"\n                                >\n                                    <slot\n                                        :name=\"`column-${col.name}`\"\n                                        :value=\"getItemPropValue(item, col)\"\n                                        :item=\"item\"\n                                    >\n                                        {{ getItemPropValue(item, col) }}\n                                    </slot>\n                                </td>\n                            </tr>\n                            <slot\n                                name=\"subrow\"\n                                :style=\"item.css ? obj2css(item.css) : ''\"\n                                :dtItemId=\"actionOnRow ? item.id : undefined\"\n                                :tabindex=\"actionOnRow ? 0 : -1\"\n                                :item=\"item\"\n                                :columns=\"columns\"\n                                :visibleColumnsNum=\"dVisibleColumnsNum\"\n                                :mobileView=\"false\"\n                            ></slot>\n                        </template>\n                        </tbody>\n                        <tbody v-else-if=\"!loading\">\n                            <tr>\n                                <td :colspan=\"dVisibleColumnsNum\">\n                                    <slot name=\"no-items\">\n                                        <div class=\"no-items\">{{ $t('no_items') }}</div>\n                                    </slot>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </slot>\n                    <slot name=\"footer\">\n                        <tfoot>\n                            <tr v-if=\"infiniteScroll && cItems.length\" v-show=\"!disableInfiniteScroll\">\n                                <td :colspan=\"dVisibleColumnsNum\">\n                                    <f-intersection-observer :root-margin=\"`${infiniteScrollDistance}px 0px`\" @entry=\"onEntry\" class=\"f-loading-more\">\n                                        <pulse-loader color=\"#1969ff\"></pulse-loader>\n                                    </f-intersection-observer>\n                                </td>\n                            </tr>\n\n                            <tr v-if=\"loading && (!cItems.length || forceLoading)\">\n                                <td :colspan=\"dVisibleColumnsNum\">\n                                    <div class=\"f-loading-more\">\n                                        <pulse-loader color=\"#1969ff\"></pulse-loader>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tfoot>\n                    </slot>\n                </table>\n\n                <div v-else class=\"mobile-view f-data-layout normal-padding\">\n                    <div v-if=\"cItems.length\">\n                        <template v-for=\"item in cItems\">\n                            <div\n                                :key=\"item.id\"\n                                :style=\"item.css ? obj2css(item.css) : ''\"\n                                :data-dt-item-id=\"actionOnRow ? item.id : undefined\"\n                                :tabindex=\"actionOnRow ? 0 : -1\"\n                                class=\"mobile-item\"\n                            >\n                                <div\n                                    v-for=\"(col, index) in columns\"\n                                    :key=\"col.name\"\n                                    :class=\"getColumnClass(index, col)\"\n                                >\n                                    <template v-if=\"!col.hidden\">\n                                        <slot\n                                            :name=\"`column-${col.name}`\"\n                                            :value=\"getItemPropValue(item, col)\"\n                                            :item=\"item\"\n                                            :column=\"col\"\n                                        >\n                                            <div class=\"row no-collapse no-vert-col-padding\">\n                                                <div :class=\"`col-${firstMVColumnWidth} f-row-label`\">\n                                                    {{ col.label }}\n                                                </div>\n                                                <div class=\"col break-word\">{{ getItemPropValue(item, col) }}</div>\n                                            </div>\n                                        </slot>\n                                    </template>\n                                </div>\n                                <slot\n                                    name=\"subrow\"\n                                    :style=\"item.css ? obj2css(item.css) : ''\"\n                                    :dtItemId=\"actionOnRow ? item.id : undefined\"\n                                    :tabindex=\"actionOnRow ? 0 : -1\"\n                                    :item=\"item\"\n                                    :columns=\"columns\"\n                                    :visibleColumnsNum=\"dVisibleColumnsNum\"\n                                    :mobileView=\"true\"\n                                ></slot>\n                            </div>\n                        </template>\n                    </div>\n                    <div v-else-if=\"!loading\">\n                        <div class=\"no-items\">{{ $t('no_items') }}</div>\n                    </div>\n\n                    <div v-if=\"infiniteScroll && cItems.length\" v-show=\"!disableInfiniteScroll\">\n                        <f-intersection-observer :root-margin=\"`${infiniteScrollDistance}px 0px`\" @entry=\"onEntry\" class=\"f-loading-more\">\n                            <pulse-loader color=\"#1969ff\"></pulse-loader>\n                        </f-intersection-observer>\n                    </div>\n\n                    <div v-if=\"loading && (!cItems.length || forceLoading)\">\n                        <div class=\"f-loading-more\">\n                            <pulse-loader color=\"#1969ff\"></pulse-loader>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <slot name=\"after-table\"></slot>\n\n            <f-head-style :css=\"dCss\"></f-head-style>\n        </div>\n    </f-card>\n</template>\n\n<script>\nimport FHeadStyle from '../FHeadStyle/FHeadStyle.vue';\nimport FPagination from '../FPagination/FPagination.vue';\nimport { getNestedProp, isValidIndex } from '../../../utils';\nimport { cloneObject, isObjectEmpty } from '../../../utils';\nimport { obj2css } from '../../../utils';\nimport { helpersMixin } from '../../../mixins/helpers.js';\nimport events from '../../../mixins/events.js';\nimport FCard from '../FCard/FCard.vue';\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue';\nimport { isAriaAction } from '@/utils/aria.js';\nimport FIntersectionObserver from \"@/components/core/FIntersectionObserver/FIntersectionObserver.vue\";\n\nconst GRID_STORAGE_KEY = 'next-data-grid';\n\nexport default {\n    components: {\n        FIntersectionObserver,\n        FCard,\n        FHeadStyle,\n        FPagination,\n        PulseLoader,\n    },\n\n    mixins: [helpersMixin, events],\n\n    props: {\n        /**\n         * Array of columns descriptions.\n         *\n         * One item is an object with keys:\n         * `name` {string} - unique name of column (required). Can be used as a data item property.\n         * `label` {string} - label of column placed in the header of table\n         * `itemProp` {string} - can be used to get data from nested data item property - 'prop1.prop2' for example\n         * `formatter` {function} - apply this formatter to data item value\n         * `readValueFrom` {string} - if there is no key `name` in data item object, read value from column with name `value`\n         * `width` {string} - minimum width of column\n         * `hidden` {boolean} - if `true`, column will be hidden\n         * `css` {object} - style for whole column. Keys are css properties in camel case, values are valid css values.\n         * `cssClass` {string} - css class to be added to column\n         * `cellChildrenCss` {object} - style for column cells direct children. Keys are css properties in camel case, values are valid css values.\n         * `oneLineMode` {boolean} - if `true`, no line breaks are allowed in column's cells.\n         */\n        columns: {\n            type: Array,\n            required: true,\n            default() {\n                return [];\n            },\n        },\n\n        /**\n         * Array of table rows.\n         *\n         * One item is an object, where keys are column names.\n         * Reserved keys are:\n         * `css` {object} - style for whole row. Keys are css properties in camel case, values are valid css values.\n         */\n        items: {\n            type: Array,\n            default() {\n                return [];\n            },\n        },\n\n        /** Height of data table. */\n        height: {\n            type: String,\n            default: 'auto',\n        },\n\n        /** Array of column names to be hidden. */\n        hiddenColumns: {\n            type: Array,\n            default() {\n                return [];\n            },\n        },\n\n        /**\n         * Grid's code used for identification in local storage\n         */\n        code: {\n            type: String,\n            default: '',\n        },\n\n        /**\n         * Width of first column in mobile view (from '1' to '12').\n         * Used in mobile view slot's default content only.\n         */\n        firstMVColumnWidth: {\n            type: String,\n            default: '4',\n        },\n\n        /**  */\n        fixedHeader: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** Enable infinite scrolling. */\n        infiniteScroll: {\n            type: Boolean,\n            default: false,\n        },\n\n        /**\n         * The minimum distance between the bottom of the element and the bottom of the viewport\n         * before the v-infinite-scroll method is executed.\n         */\n        infiniteScrollDistance: {\n            type: Number,\n            default: 800,\n        },\n\n        /**  */\n        disableInfiniteScroll: {\n            type: Boolean,\n            default: true,\n        },\n\n        /** Server side pagination and sorting. */\n        serverSide: {\n            type: Boolean,\n            default: false,\n        },\n\n        /**  */\n        usePagination: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** Display loading message. */\n        loading: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** Display loading message, even if items exist. */\n        forceLoading: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** Render data table in mobile view. */\n        mobileView: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** If `true`, no line breaks are allowed in table cells. */\n        oneLineMode: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** If `true`, f-card element will be without any style. */\n        fCardOff: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** No left padding on the first column and right padding on the last column. */\n        noFLPadding: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** If `true`, row will become clickable and 'row-action' event will be triggered. */\n        actionOnRow: {\n            type: Boolean,\n            default: false,\n        },\n\n        /** If `true` and `code` prop is set, save info about sorting to local storage. */\n        saveSorting: {\n            type: Boolean,\n            default: true,\n        },\n\n        ...FPagination.props,\n    },\n\n    data() {\n        return {\n            dId: `tbl${this._uid}`,\n            dCss: '',\n            dPagination: {},\n            dVisibleColumnsNum: 0,\n            // dItems: this.items\n        };\n    },\n\n    computed: {\n        /**\n         * Property is set to `true`, if 'data-table-mobile-view' breakpoint is reached.\n         *\n         * @return {Boolean}\n         */\n        cMobileView() {\n            const dataTableBreakpoint = this.$store.state.breakpoints['data-table-mobile-view'];\n\n            return (dataTableBreakpoint && dataTableBreakpoint.matches) || this.mobileView;\n        },\n\n        /**\n         * Get items (rows). If pagination is used, return proper slice of items.\n         */\n        cItems() {\n            const { itemsIndices } = this.dPagination;\n\n            this.setIds(this.items);\n\n            if (!this.serverSide && this.usePagination) {\n                return itemsIndices ? this.items.slice(itemsIndices.from, itemsIndices.to + 1) : [];\n            } else {\n                if (this.items.length > 0) {\n                    this.initialSort();\n                }\n\n                return this.items;\n            }\n        },\n\n        /**\n         * Calculates max-height of data table.\n         */\n        cHeight() {\n            if (this.height === 'auto') {\n                return '';\n            }\n\n            return `max-height: ${this.height}`;\n        },\n\n        /**\n         * Container's css classes.\n         */\n        cCssClass() {\n            return {\n                'f-card-on': !this.fCardOff,\n                'height-set': this.height !== 'auto',\n                'fixed-header': this.fixedHeader,\n                'no-fl-padding': this.noFLPadding || !this.fCardOff,\n                'action-on-row': this.actionOnRow,\n            };\n        },\n    },\n\n    created() {\n        this.colClassRE = /\\s*_c(\\d)\\s*/;\n        this._sortByCol = -1;\n        this._initialSort = true;\n        // Settings stored in local storage. Keys are codes, values are settings.\n        this._settings = this.getStoredSettings();\n\n        this.prepareColumns();\n    },\n\n    methods: {\n        initialSort() {\n            if (this._initialSort) {\n                this._initialSort = false;\n\n                setTimeout(() => {\n                    const { sorting } = this._settings;\n                    let column = null;\n\n                    if (sorting) {\n                        column = this.getColumnByName(sorting.sortBy);\n                        if (column) {\n                            this.sortByColumn(column, sorting.sortDir);\n                        }\n                    } else if (this._sortByCol > -1) {\n                        column = this.columns[this._sortByCol];\n                        this.sortByColumn(column, column.sortDir);\n                    }\n                }, 10);\n            }\n        },\n\n        /**\n         * Set columns css, ...\n         */\n        prepareColumns() {\n            const { columns } = this;\n            const hiddenColumns = this.hiddenColumns.length > 0 ? this.hiddenColumns : null;\n            let cssStr = '';\n            let dVisibleColumnsNum = 0;\n            let firstVisible = false;\n\n            columns.forEach((_column, _index) => {\n                const css = {};\n                const cellChildrenCss = {};\n\n                _column._index = _index;\n\n                if (_column.sortDir) {\n                    this._sortByCol = _index;\n                }\n\n                if (hiddenColumns && hiddenColumns.indexOf(_column.name) > -1) {\n                    _column.hidden = true;\n                }\n\n                if (!_column.hidden) {\n                    dVisibleColumnsNum++;\n\n                    if (!firstVisible) {\n                        firstVisible = true;\n\n                        _column.cssClass = `${_column.cssClass || ''} f-col`;\n                    }\n                }\n\n                if (_column.width) {\n                    css.width = _column.width;\n                    css.minWidth = css.width;\n                } else if (_column.minWidth) {\n                    css.minWidth = _column.minWidth;\n                }\n\n                if (_column.css) {\n                    Object.assign(css, _column.css);\n                }\n\n                if (_column.cellChildrenCss) {\n                    Object.assign(cellChildrenCss, _column.cellChildrenCss);\n                }\n\n                if (this.oneLineMode || _column.oneLineMode) {\n                    const threeDots = {\n                        whiteSpace: 'nowrap',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                    };\n\n                    Object.assign(css, threeDots);\n                    // Object.assign(cellChildrenCss, threeDots);\n                }\n\n                if (!isObjectEmpty(css)) {\n                    cssStr += `#${this.dId} .${this.getColumnClass(_index)} {${obj2css(css)}}`;\n                }\n\n                if (!isObjectEmpty(cellChildrenCss)) {\n                    cssStr += `#${this.dId} .${this.getColumnClass(_index)} > * {${obj2css(cellChildrenCss)}}`;\n                }\n            });\n\n            for (let i = columns.length - 1; i >= 0; i--) {\n                if (!columns[i].hidden) {\n                    columns[i].cssClass = `${columns[i].cssClass || ''} l-col`;\n                    break;\n                }\n            }\n\n            if (cssStr) {\n                this.dCss = cssStr;\n            }\n\n            if (dVisibleColumnsNum > 0) {\n                this.dVisibleColumnsNum = dVisibleColumnsNum;\n            }\n        },\n\n        /**\n         * Fetch more data.\n         */\n        fetchMore(_visible) {\n            this.$emit('loader-visibility', _visible);\n\n            if (_visible) {\n                this.$emit('fetch-more');\n            }\n        },\n\n        /**\n         * @param {int} _index\n         * @param {object} _data\n         * @return {boolean}\n         */\n        updateRow(_index, _data) {\n            if (isValidIndex(_index, this.items)) {\n                this.$set(this.items, _index, _data);\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * @param {int} _rowIndex\n         * @param {string} _colName\n         * @param {*} _data\n         * @return {boolean}\n         */\n        updateCell(_rowIndex, _colName, _data) {\n            if (isValidIndex(_rowIndex, this.items)) {\n                // && _colName in columnsByName (object)!!\n                this.$set(this.items[_rowIndex], _colName, _data);\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Get column's css class.\n         *\n         * @param {int} _index\n         * @param {object} [_column]\n         * @return {string}\n         */\n        getColumnClass(_index, _column) {\n            return `_c${_index} ` + (_column && _column.cssClass ? _column.cssClass : '');\n        },\n\n        /**\n         * Get heading column's css classes.\n         *\n         * @param {object} [_column]\n         * @return {string}\n         */\n        getHeadingColumnClass(_column) {\n            if (_column.sortFunc) {\n                return `sortable ${_column.sortDir || ''}`;\n            }\n\n            return '';\n        },\n\n        /**\n         * Get column by its css class.\n         *\n         * @param {string} _class\n         * @return {object}\n         */\n        getColumnByClass(_class) {\n            const match = this.colClassRE.exec(_class);\n            let column = null;\n\n            if (match && match.length === 2) {\n                column = this.columns[parseInt(match[1])] || null;\n            }\n\n            return column;\n        },\n\n        getColumnByName(name) {\n            return this.columns.find(column => column.name === name);\n        },\n\n        /**\n         * Get data item value.\n         *\n         * @param {object} _item\n         * @param {object} _col\n         * @return {*}\n         */\n        getItemPropValue(_item, _col) {\n            let value;\n\n            if (_col.itemProp) {\n                value = getNestedProp(_item, _col.itemProp);\n            } else if (_col.readValueFrom) {\n                value = _item[_col.readValueFrom];\n            } else {\n                value = _item[_col.name];\n            }\n\n            if (_col.formatter && !_col.hidden) {\n                value = _col.formatter(value, _item);\n            }\n\n            return value;\n        },\n\n        /**\n         * Sort table by column.\n         *\n         * @param {Object} _column\n         * @param {String} [_sortDir] 'asc'|'desc'\n         * @param {boolean} [_click]\n         */\n        sortByColumn(_column, _sortDir, _click) {\n            if (_column && _column.sortFunc) {\n                const sortByCol = this._sortByCol;\n\n                if (sortByCol > -1 && sortByCol !== _column._index) {\n                    this.columns[sortByCol].sortDir = '';\n                }\n\n                if (_sortDir) {\n                    _column.sortDir = _sortDir;\n                } else {\n                    // default sort on column header click is 'desc'\n                    if (_column.sortDir === 'desc') {\n                        _column.sortDir = 'asc';\n                    } else {\n                        _column.sortDir = 'desc';\n                    }\n                }\n\n                this._sortByCol = _column._index;\n\n                if (_click && this.code && this.saveSorting) {\n                    const sorting = {\n                        sortBy: _column.name,\n                        sortDir: _column.sortDir,\n                    }\n\n                    console.log('save sorting', sorting);\n                    this.saveSettings({ ...this._settings, sorting});\n                }\n\n                this.items.sort(_column.sortFunc(_column.itemProp || _column.name, _column.sortDir));\n            }\n        },\n\n        /**\n         * @return {Object}\n         */\n        getStoredSettings() {\n            const { localStorage } = window;\n            let settings = {};\n\n            if (this.code && localStorage) {\n                const gridSettings = JSON.parse(localStorage.getItem(GRID_STORAGE_KEY) || '{}');\n\n                if (gridSettings && gridSettings[this.code]) {\n                    settings = gridSettings[this.code];\n                }\n            }\n\n            return settings;\n        },\n\n        /**\n         * @param {Object} settings\n         */\n        saveSettings(settings) {\n            const { localStorage } = window;\n\n            if (this.code && localStorage) {\n                const gridSettings = JSON.parse(localStorage.getItem(GRID_STORAGE_KEY) || '{}');\n\n                gridSettings[this.code] = settings;\n\n                localStorage.setItem(GRID_STORAGE_KEY, JSON.stringify(gridSettings));\n            }\n        },\n\n        /**\n         * @param {Event} _event\n         */\n        onTableClick(_event) {\n            /** @type {HTMLElement} */\n            let elem;\n\n            if (this.actionOnRow) {\n                elem = _event.target.closest('[data-dt-item-id]');\n                if (elem) {\n                    const id = elem.getAttribute('data-dt-item-id');\n                    const item = this.items.find((_item) => _item.id === id);\n\n                    if (item) {\n                        this.$emit('row-action', { ...item });\n                    }\n                }\n            }\n        },\n\n        /**\n         * @param {KeyboardEvent} _event\n         */\n        onTabletKeyup(_event) {\n            if (isAriaAction(_event)) {\n                this.onTableClick(_event);\n            }\n        },\n\n        /**\n         * @param {Event} _event\n         */\n        onHeaderClick(_event) {\n            let elem = _event.target.closest('th');\n            const column = elem ? this.getColumnByClass(elem.className) : null;\n\n            this.sortByColumn(column, '', true);\n        },\n\n        /**\n         * Triggered on `FPagination`'s `'page-change'` event.\n         *\n         * @param {Object} _data\n         */\n        onPageChange(_data) {\n            this.dPagination = cloneObject(_data.detail);\n        },\n\n        /**\n         * @param {IntersectionObserverEntry} _entry\n         */\n        onEntry(_entry) {\n            this.fetchMore(_entry.isIntersecting);\n        },\n\n        /**\n         * Convert object, where keys are css properties, to string.\n         *\n         * @param {object} _cssObj\n         * @return {string}\n         */\n        obj2css: obj2css,\n    },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'style';\n</style>\n"]}]}