{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js??ref--1-0!/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/data-tables/FContractList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/data-tables/FContractList.vue","mtime":1657708591538},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL21udC93ZWJzaXRlcy9leC5uZXh0c21hcnRjaGFpbi5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbC5qcyI7Cgp2YXIgX3RlbXBsYXRlT2JqZWN0OwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IEZEYXRhVGFibGUgZnJvbSAiLi4vY29tcG9uZW50cy9jb3JlL0ZEYXRhVGFibGUvRkRhdGFUYWJsZS52dWUiOwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKaW1wb3J0IHsgV0VJVG9GVE0gfSBmcm9tICIuLi91dGlscy90cmFuc2FjdGlvbnMuanMiOwppbXBvcnQgeyB0aW1lc3RhbXBUb0RhdGUsIGZvcm1hdEhleFRvSW50LCBmb3JtYXREYXRlIH0gZnJvbSAiLi4vZmlsdGVycy5qcyI7CmltcG9ydCBGRWxsaXBzaXMgZnJvbSAiLi4vY29tcG9uZW50cy9jb3JlL0ZFbGxpcHNpcy9GRWxsaXBzaXMudnVlIjsKaW1wb3J0IHsgY2xvbmVPYmplY3QgfSBmcm9tICJAL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGQ29udHJhY3RMaXN0IiwKICBjb21wb25lbnRzOiB7CiAgICBGRWxsaXBzaXM6IEZFbGxpcHNpcywKICAgIEZEYXRhVGFibGU6IEZEYXRhVGFibGUKICB9LAogIHByb3BzOiB7CiAgICAvKiogTnVtYmVyIG9mIGl0ZW1zIHBlciBwYWdlLiAqLwogICAgaXRlbXNQZXJQYWdlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNDAKICAgIH0KICB9LAogIGFwb2xsbzogewogICAgY29udHJhY3RzOiB7CiAgICAgIHF1ZXJ5OiBncWwoX3RlbXBsYXRlT2JqZWN0IHx8IChfdGVtcGxhdGVPYmplY3QgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgcXVlcnkgQ29udHJhY3RMaXN0KCRjdXJzb3I6IEN1cnNvciwgJGNvdW50OiBJbnQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0cyhjdXJzb3I6ICRjdXJzb3IsIGNvdW50OiAkY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VJbmZvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNOZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmFjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwbG95ZWRCeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIl0pKSksCiAgICAgIHZhcmlhYmxlczogZnVuY3Rpb24gdmFyaWFibGVzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBjdXJzb3I6IG51bGwsCiAgICAgICAgICBjb3VudDogdGhpcy5pdGVtc1BlclBhZ2UKICAgICAgICB9OwogICAgICB9LAogICAgICByZXN1bHQ6IGZ1bmN0aW9uIHJlc3VsdChfZGF0YSwgX2tleSkgewogICAgICAgIHZhciBkYXRhOwoKICAgICAgICBpZiAoX2tleSA9PT0gImNvbnRyYWN0cyIpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCc/Pz8nKTsKICAgICAgICAgIGRhdGEgPSBfZGF0YS5kYXRhLmNvbnRyYWN0czsKICAgICAgICAgIHZhciBlZGdlcyA9IGNsb25lT2JqZWN0KGRhdGEuZWRnZXMpOwogICAgICAgICAgdGhpcy5kSGFzTmV4dCA9IGRhdGEucGFnZUluZm8uaGFzTmV4dDsKCiAgICAgICAgICBpZiAodGhpcy5kSXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZEl0ZW1zID0gZWRnZXM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuMSA9IGVkZ2VzLmxlbmd0aDsgaSA8IGxlbjE7IGkrKykgewogICAgICAgICAgICAgIHRoaXMuZEl0ZW1zLnB1c2goZWRnZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy4kZW1pdCgicmVjb3Jkcy1jb3VudCIsIGZvcm1hdEhleFRvSW50KGRhdGEudG90YWxDb3VudCkpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikgewogICAgICAgIHRoaXMuZENvbnRyYWN0TGlzdEVycm9yID0gX2Vycm9yLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkSXRlbXM6IFtdLAogICAgICBkSGFzTmV4dDogZmFsc2UsCiAgICAgIGRDb250cmFjdExpc3RFcnJvcjogIiIsCiAgICAgIGRDb2x1bW5zOiBbewogICAgICAgIG5hbWU6ICJhZGRyZXNzbmFtZSIsCiAgICAgICAgbGFiZWw6ICIiLmNvbmNhdCh0aGlzLiR0KCJ2aWV3X2NvbnRyYWN0X2xpc3QuYWRkcmVzcyIpLCAiIC8gIikuY29uY2F0KHRoaXMuJHQoInZpZXdfY29udHJhY3RfbGlzdC5uYW1lIikpLAogICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QiLAogICAgICAgIHdpZHRoOiAnNDAwcHgnCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAidmFsaWRhdGVkIiwKICAgICAgICBsYWJlbDogdGhpcy4kdCgidmlld19jb250cmFjdF9saXN0LnZhbGlkYXRlZCIpLAogICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QudmFsaWRhdGVkIiwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIGZvcm1hdHRlcihfdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBmb3JtYXREYXRlKHRpbWVzdGFtcFRvRGF0ZShfdmFsdWUpKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAidGltZXN0YW1wIiwKICAgICAgICBsYWJlbDogdGhpcy4kdCgidmlld19jb250cmFjdF9saXN0LnRpbWVzdGFtcCIpLAogICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QudGltZXN0YW1wIiwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIGZvcm1hdHRlcihfdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBmb3JtYXREYXRlKHRpbWVzdGFtcFRvRGF0ZShfdmFsdWUpKTsKICAgICAgICB9CiAgICAgIH1dCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICogUHJvcGVydHkgaXMgc2V0IHRvIGB0cnVlYCwgaWYgJ2NvbnRyYWN0LWxpc3QtZHQtbW9iaWxlLXZpZXcnIGJyZWFrcG9pbnQgaXMgcmVhY2hlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHtCb29sZWFufQogICAgICovCiAgICBjTW9iaWxlVmlldzogZnVuY3Rpb24gY01vYmlsZVZpZXcoKSB7CiAgICAgIHZhciBkYXRhVGFibGVCcmVha3BvaW50ID0gdGhpcy4kc3RvcmUuc3RhdGUuYnJlYWtwb2ludHNbJ2NvbnRyYWN0LWxpc3QtZHQtbW9iaWxlLXZpZXcnXTsKICAgICAgcmV0dXJuIGRhdGFUYWJsZUJyZWFrcG9pbnQgJiYgZGF0YVRhYmxlQnJlYWtwb2ludC5tYXRjaGVzOwogICAgfSwKICAgIGNMb2FkaW5nOiBmdW5jdGlvbiBjTG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwb2xsby5xdWVyaWVzLmNvbnRyYWN0cy5sb2FkaW5nOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hNb3JlOiBmdW5jdGlvbiBmZXRjaE1vcmUoKSB7CiAgICAgIHZhciBjb250cmFjdHMgPSB0aGlzLmNvbnRyYWN0czsKCiAgICAgIGlmIChjb250cmFjdHMgJiYgY29udHJhY3RzLnBhZ2VJbmZvICYmIGNvbnRyYWN0cy5wYWdlSW5mby5oYXNOZXh0KSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGNvbnRyYWN0cy5wYWdlSW5mby5sYXN0OwogICAgICAgIHRoaXMuJGFwb2xsby5xdWVyaWVzLmNvbnRyYWN0cy5mZXRjaE1vcmUoewogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIGN1cnNvcjogY3Vyc29yLAogICAgICAgICAgICBjb3VudDogdGhpcy5pdGVtc1BlclBhZ2UKICAgICAgICAgIH0sCiAgICAgICAgICB1cGRhdGVRdWVyeTogZnVuY3Rpb24gdXBkYXRlUXVlcnkocHJldmlvdXNSZXN1bHQsIF9yZWYpIHsKICAgICAgICAgICAgdmFyIGZldGNoTW9yZVJlc3VsdCA9IF9yZWYuZmV0Y2hNb3JlUmVzdWx0OwogICAgICAgICAgICByZXR1cm4gZmV0Y2hNb3JlUmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgV0VJVG9GVE06IFdFSVRvRlRNLAogICAgdGltZXN0YW1wVG9EYXRlOiB0aW1lc3RhbXBUb0RhdGUKICB9Cn07"},{"version":3,"mappings":";;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA,qBADA;EAGAC;IACAC,oBADA;IAEAC;EAFA,CAHA;EAQAC;IACA;IACAC;MACAC,YADA;MAEAC;IAFA;EAFA,CARA;EAgBAC;IACAC;MACAC,8kCADA;MA6BAC,SA7BA,uBA6BA;QACA;UACAC,YADA;UAEAC;QAFA;MAIA,CAlCA;MAmCAC,MAnCA,kBAmCAC,KAnCA,EAmCAC,IAnCA,EAmCA;QACA;;QAEA;UACA;UACAC;UAEA;UAEA;;UAEA;YACA;UACA,CAFA,MAEA;YACA;cACA;YACA;UACA;;UAEA,WACA,eADA,EAEAC,+BAFA;QAIA;MACA,CA3DA;MA4DAC,KA5DA,iBA4DAC,MA5DA,EA4DA;QACA;MACA;IA9DA;EADA,CAhBA;EAmFAH,IAnFA,kBAmFA;IACA;MACAI,UADA;MAEAC,eAFA;MAGAC,sBAHA;MAIAC,WACA;QACAxB,mBADA;QAEAyB,yGAFA;QAGAC,oBAHA;QAIAC;MAJA,CADA,EAOA;QACA3B,iBADA;QAEAyB,8CAFA;QAGAC,8BAHA;QAIAE;UAAA;QAAA;MAJA,CAPA,EAaA;QACA5B,iBADA;QAEAyB,8CAFA;QAGAC,8BAHA;QAIAE;UAAA;QAAA;MAJA,CAbA;IAJA;EAyBA,CA7GA;EA+GAC;IACA;AACA;AACA;AACA;AACA;IACAC,WANA,yBAMA;MACA;MAEA;IACA,CAVA;IAYAC,QAZA,sBAYA;MACA;IACA;EAdA,CA/GA;EAgIAC;IACAC,SADA,uBACA;MACA;;MAEA;QACA;QAEA;UACAtB;YACAC,cADA;YAEAC;UAFA,CADA;UAKAqB;YAAA;YACA;UACA;QAPA;MASA;IACA,CAjBA;IAmBAC,kBAnBA;IAoBAC;EApBA;AAhIA","names":["name","components","FEllipsis","FDataTable","props","itemsPerPage","type","default","apollo","contracts","query","variables","cursor","count","result","_data","_key","data","formatHexToInt","error","_error","dItems","dHasNext","dContractListError","dColumns","label","itemProp","width","formatter","computed","cMobileView","cLoading","methods","fetchMore","updateQuery","WEIToFTM","timestampToDate"],"sourceRoot":"src/data-tables","sources":["FContractList.vue"],"sourcesContent":["<template>\n    <div class=\"contract-list-dt\">\n        <template v-if=\"!dContractListError\">\n            <f-data-table\n                :columns=\"dColumns\"\n                :items=\"dItems\"\n                :disable-infinite-scroll=\"!dHasNext\"\n                :loading=\"cLoading\"\n                :mobile-view=\"cMobileView\"\n                infinite-scroll\n                fixed-header\n                class=\"f-data-table-body-bg-color\"\n                @fetch-more=\"fetchMore\"\n            >\n                <template v-slot:column-addressname=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-4 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col-8\">\n                            <router-link :to=\"{name: 'address-detail', params: {id: value.address}}\" :title=\"value.address\">\n                                <f-ellipsis :text=\"value.address\" overflow=\"middle\" />\n                            </router-link>\n                            <span class=\"contract-name\">{{ value.name }}</span>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'address-detail', params: {id: value.address}}\" :title=\"value.address\">\n                            <f-ellipsis :text=\"value.address\" overflow=\"middle\" />\n                        </router-link>\n                        <span class=\"contract-name\">{{ value.name }}</span>\n                    </template>\n                </template>\n            </f-data-table>\n        </template>\n\n        <template v-else>\n            <div class=\"query-error\">{{ dContractListError }}</div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport FDataTable from \"../components/core/FDataTable/FDataTable.vue\";\nimport gql from \"graphql-tag\";\nimport { WEIToFTM } from \"../utils/transactions.js\";\nimport {timestampToDate, formatHexToInt, formatDate} from \"../filters.js\";\nimport FEllipsis from \"../components/core/FEllipsis/FEllipsis.vue\";\nimport {cloneObject} from \"@/utils\";\n\nexport default {\n    name: \"FContractList\",\n\n    components: {\n        FEllipsis,\n        FDataTable\n    },\n\n    props: {\n        /** Number of items per page. */\n        itemsPerPage: {\n            type: Number,\n            default: 40\n        }\n    },\n\n    apollo: {\n        contracts: {\n            query: gql`\n                query ContractList($cursor: Cursor, $count: Int!) {\n                    contracts(cursor: $cursor, count: $count) {\n                        totalCount\n                        pageInfo {\n                            first\n                            last\n                            hasNext\n                            hasPrevious\n                        }\n                        edges {\n                            contract {\n                                address\n                                deployedBy {\n                                    hash\n                                }\n                                transactionHash\n                                name\n                                version\n                                compiler\n                                validated\n                                timestamp\n                            }\n                            cursor\n                        }\n                    }\n                }\n            `,\n            variables() {\n                return {\n                    cursor: null,\n                    count: this.itemsPerPage\n                };\n            },\n            result(_data, _key) {\n                let data;\n\n                if (_key === \"contracts\") {\n                    // console.log('???');\n                    data = _data.data.contracts;\n\n                    const edges = cloneObject(data.edges);\n\n                    this.dHasNext = data.pageInfo.hasNext;\n\n                    if (this.dItems.length === 0) {\n                        this.dItems = edges;\n                    } else {\n                        for (let i = 0, len1 = edges.length; i < len1; i++) {\n                            this.dItems.push(edges[i]);\n                        }\n                    }\n\n                    this.$emit(\n                        \"records-count\",\n                        formatHexToInt(data.totalCount)\n                    );\n                }\n            },\n            error(_error) {\n                this.dContractListError = _error.message;\n            }\n        }\n    },\n\n    data() {\n        return {\n            dItems: [],\n            dHasNext: false,\n            dContractListError: \"\",\n            dColumns: [\n                {\n                    name: \"addressname\",\n                    label: `${this.$t(\"view_contract_list.address\")} / ${this.$t(\"view_contract_list.name\")}`,\n                    itemProp: \"contract\",\n                    width: '400px',\n                },\n                {\n                    name: \"validated\",\n                    label: this.$t(\"view_contract_list.validated\"),\n                    itemProp: \"contract.validated\",\n                    formatter: (_value) => formatDate(timestampToDate(_value)),\n                },\n                {\n                    name: \"timestamp\",\n                    label: this.$t(\"view_contract_list.timestamp\"),\n                    itemProp: \"contract.timestamp\",\n                    formatter: (_value) => formatDate(timestampToDate(_value)),\n                },\n            ]\n        };\n    },\n\n    computed: {\n        /**\n         * Property is set to `true`, if 'contract-list-dt-mobile-view' breakpoint is reached.\n         *\n         * @return {Boolean}\n         */\n        cMobileView() {\n            const dataTableBreakpoint = this.$store.state.breakpoints['contract-list-dt-mobile-view'];\n\n            return (dataTableBreakpoint && dataTableBreakpoint.matches);\n        },\n\n        cLoading() {\n            return this.$apollo.queries.contracts.loading;\n        }\n    },\n\n    methods: {\n        fetchMore() {\n            const { contracts } = this;\n\n            if (contracts && contracts.pageInfo && contracts.pageInfo.hasNext) {\n                const cursor = contracts.pageInfo.last;\n\n                this.$apollo.queries.contracts.fetchMore({\n                    variables: {\n                        cursor,\n                        count: this.itemsPerPage\n                    },\n                    updateQuery: (previousResult, { fetchMoreResult }) => {\n                        return fetchMoreResult;\n                    }\n                });\n            }\n        },\n\n        WEIToFTM,\n        timestampToDate\n    }\n};\n</script>\n\n<style lang=\"scss\">\n    .contract-list-dt {\n        .contract-name {\n            display: block;\n            padding-top: 4px;\n        }\n    }\n</style>\n"]}]}