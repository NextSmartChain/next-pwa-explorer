{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js??ref--1-0!/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/forms/ValidateContractForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/forms/ValidateContractForm.vue","mtime":1657708591318},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL21udC93ZWJzaXRlcy9leC5uZXh0c21hcnRjaGFpbi5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCBmcm9tICIvbW50L3dlYnNpdGVzL2V4Lm5leHRzbWFydGNoYWluLmNvbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdGFnZ2VkVGVtcGxhdGVMaXRlcmFsLmpzIjsKCnZhciBfdGVtcGxhdGVPYmplY3Q7CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgRkZvcm0gZnJvbSAiLi4vY29tcG9uZW50cy9jb3JlL0ZGb3JtL0ZGb3JtLnZ1ZSI7CmltcG9ydCBGSW5wdXQgZnJvbSAiLi4vY29tcG9uZW50cy9jb3JlL0ZJbnB1dC9GSW5wdXQudnVlIjsKaW1wb3J0IEZNZXNzYWdlIGZyb20gIi4uL2NvbXBvbmVudHMvY29yZS9GTWVzc2FnZS9GTWVzc2FnZS52dWUiOwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWYWxpZGF0ZUNvbnRyYWN0Rm9ybSIsCiAgY29tcG9uZW50czogewogICAgRk1lc3NhZ2U6IEZNZXNzYWdlLAogICAgRklucHV0OiBGSW5wdXQsCiAgICBGRm9ybTogRkZvcm0KICB9LAogIHByb3BzOiB7CiAgICAvKiogQWNjb3VudCBkYXRhICovCiAgICBjb250cmFjdERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc291cmNlQ29kZTogJycsCiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIHZlcnNpb246ICcnLAogICAgICAgICAgc3VwcG9ydENvbnRhY3Q6ICcnLAogICAgICAgICAgYWRkcmVzczogJycKICAgICAgICB9OwogICAgICB9LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yTWVzc2FnZTogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZUNvbnRyYWN0OiBmdW5jdGlvbiB2YWxpZGF0ZUNvbnRyYWN0KF9jb250cmFjdCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uKCRjb250cmFjdDogQ29udHJhY3RWYWxpZGF0aW9uSW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVDb250cmFjdChjb250cmFjdDogJGNvbnRyYWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwbG95ZWRCeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRDb250YWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIl0pKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBjb250cmFjdDogX2NvbnRyYWN0CiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfZGF0YSkgewogICAgICAgIF90aGlzLiRlbWl0KCdjb250cmFjdC12YWxpZGF0ZWQnLCBfZGF0YS5kYXRhLnZhbGlkYXRlQ29udHJhY3QpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoX2Vycm9yKSB7CiAgICAgICAgX3RoaXMuZXJyb3JNZXNzYWdlID0gX2Vycm9yOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3ZhbHVlCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBjaGVja05hbWU6IGZ1bmN0aW9uIGNoZWNrTmFtZShfdmFsdWUpIHsKICAgICAgcmV0dXJuIF92YWx1ZS5sZW5ndGggPD0gNjQ7CiAgICB9LAoKICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IF92YWx1ZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgY2hlY2tWZXJzaW9uOiBmdW5jdGlvbiBjaGVja1ZlcnNpb24oX3ZhbHVlKSB7CiAgICAgIHJldHVybiBfdmFsdWUubGVuZ3RoIDw9IDE0OwogICAgfSwKCiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdmFsdWUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGNoZWNrU3VwcG9ydENvbnRhY3Q6IGZ1bmN0aW9uIGNoZWNrU3VwcG9ydENvbnRhY3QoX3ZhbHVlKSB7CiAgICAgIHJldHVybiBfdmFsdWUubGVuZ3RoIDw9IDY0OwogICAgfSwKCiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdmFsdWUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGNoZWNrU291cmNlQ29kZTogZnVuY3Rpb24gY2hlY2tTb3VyY2VDb2RlKF92YWx1ZSkgewogICAgICByZXR1cm4gISFfdmFsdWUudHJpbSgpOwogICAgfSwKICAgIG9uRm9ybVN1Ym1pdDogZnVuY3Rpb24gb25Gb3JtU3VibWl0KF9ldmVudCkgewogICAgICB2YXIgZGF0YSA9IF9ldmVudC5kZXRhaWwuZGF0YTsKCiAgICAgIGlmICghZGF0YS5uYW1lKSB7CiAgICAgICAgZGVsZXRlIGRhdGEubmFtZTsKICAgICAgfQoKICAgICAgaWYgKCFkYXRhLnZlcnNpb24pIHsKICAgICAgICBkZWxldGUgZGF0YS52ZXJzaW9uOwogICAgICB9CgogICAgICBpZiAoIWRhdGEuc3VwcG9ydENvbnRhY3QpIHsKICAgICAgICBkZWxldGUgZGF0YS5zdXBwb3J0Q29udGFjdDsKICAgICAgfQoKICAgICAgdGhpcy52YWxpZGF0ZUNvbnRyYWN0KF9vYmplY3RTcHJlYWQoewogICAgICAgIGFkZHJlc3M6IHRoaXMuY29udHJhY3REYXRhLmFkZHJlc3MKICAgICAgfSwgZGF0YSkpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;AAuFA;AACA;AACA;AACA;AAEA;EACAA,4BADA;EAGAC;IAAAC;IAAAC;IAAAC;EAAA,CAHA;EAKAC;IACA;IACAC;MACAC,YADA;MAEAC,OAFA,sBAEA;QACA;UACAC,cADA;UAEAT,QAFA;UAGAU,WAHA;UAIAC,kBAJA;UAKAC;QALA;MAOA,CAVA;MAWAC;IAXA;EAFA,CALA;EAsBAC,IAtBA,kBAsBA;IACA;MACAC;IADA;EAGA,CA1BA;EA4BAC;IACAC,gBADA,4BACAC,SADA,EACA;MAAA;;MACA,aACAC,MADA,CACA;QACAC,y1BADA;QAoBAC;UACAC;QADA;MApBA,CADA,EAyBAC,IAzBA,CAyBA;QACA;MACA,CA3BA,EA4BAC,KA5BA,CA4BA;QACA;MACA,CA9BA;IA+BA,CAjCA;;IAmCA;AACA;AACA;AACA;IACAC,SAvCA,qBAuCAC,MAvCA,EAuCA;MACA;IACA,CAzCA;;IA2CA;AACA;AACA;AACA;IACAC,YA/CA,wBA+CAD,MA/CA,EA+CA;MACA;IACA,CAjDA;;IAmDA;AACA;AACA;AACA;IACAE,mBAvDA,+BAuDAF,MAvDA,EAuDA;MACA;IACA,CAzDA;;IA2DA;AACA;AACA;AACA;IACAG,eA/DA,2BA+DAH,MA/DA,EA+DA;MACA;IACA,CAjEA;IAmEAI,YAnEA,wBAmEAC,MAnEA,EAmEA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QAAAnB;MAAA;IACA;EAnFA;AA5BA","names":["name","components","FMessage","FInput","FForm","props","contractData","type","default","sourceCode","version","supportContact","address","required","data","errorMessage","methods","validateContract","_contract","mutate","mutation","variables","contract","then","catch","checkName","_value","checkVersion","checkSupportContact","checkSourceCode","onFormSubmit","_event"],"sourceRoot":"src/forms","sources":["ValidateContractForm.vue"],"sourcesContent":["<template>\n    <div class=\"validate-contract-form\">\n        <f-form center-form @f-form-submit=\"onFormSubmit\">\n            <fieldset>\n                <legend class=\"not-visible\">{{ $t('validate_contract_form.validate_contract') }}</legend>\n\n                <div class=\"form-body\">\n                    <f-input\n                        :value=\"contractData.name\"\n                        type=\"text\"\n                        :label=\"`${$t('validate_contract_form.name')} (${$t('optional')})`\"\n                        field-size=\"large\"\n                        name=\"name\"\n                        maxlength=\"64\"\n                        validate-on-input\n                        :validator=\"checkName\"\n                    >\n                        <template #bottom=\"sProps\">\n                            <f-message v-show=\"sProps.showErrorMessage\" type=\"error\" role=\"alert\" with-icon>\n                                {{ $t('maximum_allowed_characters_length', { len: 64 }) }}\n                            </f-message>\n                        </template>\n                    </f-input>\n\n                    <f-input\n                        :value=\"contractData.version\"\n                        type=\"text\"\n                        :label=\"`${$t('validate_contract_form.version')} (${$t('optional')})`\"\n                        field-size=\"large\"\n                        name=\"version\"\n                        maxlength=\"14\"\n                        validate-on-input\n                        :validator=\"checkVersion\"\n                    >\n                        <template #bottom=\"sProps\">\n                            <f-message v-show=\"sProps.showErrorMessage\" type=\"error\" role=\"alert\" with-icon>\n                                {{ $t('maximum_allowed_characters_length', { len: 14 }) }}\n                            </f-message>\n                        </template>\n                    </f-input>\n\n                    <f-input\n                        :value=\"contractData.supportContact\"\n                        type=\"text\"\n                        :label=\"`${$t('validate_contract_form.support_contact')} (${$t('optional')})`\"\n                        field-size=\"large\"\n                        name=\"supportContact\"\n                        maxlength=\"64\"\n                        validate-on-input\n                        :validator=\"checkSupportContact\"\n                    >\n                        <template #bottom=\"sProps\">\n                            <f-message v-show=\"sProps.showErrorMessage\" type=\"error\" role=\"alert\" with-icon>\n                                {{ $t('maximum_allowed_characters_length', { len: 64 }) }}\n                            </f-message>\n                        </template>\n                    </f-input>\n\n                    <f-input\n                        :value=\"contractData.sourceCode\"\n                        type=\"text\"\n                        is-textarea\n                        rows=\"20\"\n                        :label=\"`${$t('validate_contract_form.source_code')}`\"\n                        field-size=\"large\"\n                        name=\"sourceCode\"\n                        validate-on-input\n                        :validator=\"checkSourceCode\"\n                    >\n                        <template #bottom=\"sProps\">\n                            <f-message v-show=\"sProps.showErrorMessage\" type=\"error\" role=\"alert\" with-icon>\n                                {{ $t('required_field') }}\n                            </f-message>\n                        </template>\n                    </f-input>\n\n                    <div class=\"align-center form-buttons\">\n                        <f-message v-if=\"errorMessage\" type=\"error\" with-icon>{{ errorMessage }}</f-message>\n                        <button type=\"submit\" class=\"btn large\">{{ $t('validate_contract_form.validate') }}</button>\n                    </div>\n                </div>\n            </fieldset>\n        </f-form>\n    </div>\n</template>\n\n<script>\n    import FForm from \"../components/core/FForm/FForm.vue\";\n    import FInput from \"../components/core/FInput/FInput.vue\";\n    import FMessage from \"../components/core/FMessage/FMessage.vue\";\n    import gql from \"graphql-tag\";\n\n    export default {\n        name: \"ValidateContractForm\",\n\n        components: {FMessage, FInput, FForm},\n\n        props: {\n            /** Account data */\n            contractData: {\n                type: Object,\n                default() {\n                    return {\n                        sourceCode: '',\n                        name: '',\n                        version: '',\n                        supportContact: '',\n                        address: '',\n                    };\n                },\n                required: true,\n            },\n        },\n\n        data() {\n            return {\n                errorMessage: '',\n            };\n        },\n\n        methods: {\n            validateContract(_contract) {\n                this.$apollo\n                    .mutate({\n                        mutation: gql`\n                        mutation($contract: ContractValidationInput!) {\n                            validateContract(contract: $contract) {\n                                address\n                                deployedBy {\n                                    hash\n                                    contractAddress\n                                }\n                                name\n                                version\n                                compiler\n                                sourceCode\n                                abi\n                                validated\n                                supportContact\n                                timestamp\n                            }\n                        }\n                    `,\n                        variables: {\n                            contract: _contract,\n                        },\n                    })\n                    .then((_data) => {\n                        this.$emit('contract-validated', _data.data.validateContract);\n                    })\n                    .catch((_error) => {\n                        this.errorMessage = _error;\n                    });\n            },\n\n            /**\n             * @param {string} _value\n             * @return {boolean}\n             */\n            checkName(_value) {\n                return _value.length <= 64;\n            },\n\n            /**\n             * @param {string} _value\n             * @return {boolean}\n             */\n            checkVersion(_value) {\n                return _value.length <= 14;\n            },\n\n            /**\n             * @param {string} _value\n             * @return {boolean}\n             */\n            checkSupportContact(_value) {\n                return _value.length <= 64;\n            },\n\n            /**\n             * @param {string} _value\n             * @return {boolean}\n             */\n            checkSourceCode(_value) {\n                return !!_value.trim();\n            },\n\n            onFormSubmit(_event) {\n                const { data } = _event.detail;\n\n                if (!data.name) {\n                    delete data.name;\n                }\n\n                if (!data.version) {\n                    delete data.version;\n                }\n\n                if (!data.supportContact) {\n                    delete data.supportContact;\n                }\n\n                this.validateContract({ address: this.contractData.address, ...data})\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n.form-buttons {\n    .f-message {\n        margin-bottom: 16px;\n    }\n}\n</style>\n"]}]}