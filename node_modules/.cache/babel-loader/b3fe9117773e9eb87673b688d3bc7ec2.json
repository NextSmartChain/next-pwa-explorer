{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js??ref--14-0!/mnt/websites/ex.nextsmartchain.com/src/plugins/apollo-provider.js","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/plugins/apollo-provider.js","mtime":1657708590710},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js","mtime":1655491290241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IEFwb2xsb0NsaWVudCB9IGZyb20gJ2Fwb2xsby1jbGllbnQnOwppbXBvcnQgeyBIdHRwTGluayB9IGZyb20gJ2Fwb2xsby1saW5rLWh0dHAnOwppbXBvcnQgeyBJbk1lbW9yeUNhY2hlIH0gZnJvbSAnYXBvbGxvLWNhY2hlLWlubWVtb3J5JzsgLy8gTmV3IEltcG9ydHMKCmltcG9ydCB7IEFwb2xsb0xpbmssIGNvbmNhdCB9IGZyb20gJ2Fwb2xsby1saW5rJzsKaW1wb3J0IHsgUmV0cnlMaW5rIH0gZnJvbSAiYXBvbGxvLWxpbmstcmV0cnkiOwppbXBvcnQgeyBvbkVycm9yIH0gZnJvbSAnYXBvbGxvLWxpbmstZXJyb3InOwppbXBvcnQgVnVlQXBvbGxvIGZyb20gJ3Z1ZS1hcG9sbG8nOwppbXBvcnQgYXBwQ29uZmlnIGZyb20gIi4uLy4uL2FwcC5jb25maWcuanMiOwppbXBvcnQgeyBzaHVmZmxlIH0gZnJvbSAiLi4vdXRpbHMvYXJyYXkuanMiOwovKioKICogQ3JlYXRlIGFuIGFycmF5IG9mIHNodWZmbGVkIGh0dHAgcHJvdmlkZXJzIGV4Y2x1ZGluZyBkZWZhdWx0IHByb3ZpZGVyLgogKgogKiBAcGFyYW0ge0FycmF5fSBfcHJvdmlkZXJzCiAqIEBwYXJhbSB7U3RyaW5nfSBfZGVmYXVsdEh0dHBQcm92aWRlcgogKiBAcmV0dXJuIHtBcnJheX0KICovCgpmdW5jdGlvbiBzZXRIdHRwQXBvbGxvUHJvdmlkZXJzKF9wcm92aWRlcnMsIF9kZWZhdWx0SHR0cFByb3ZpZGVyKSB7CiAgdmFyIHByb3ZpZGVycyA9IF9wcm92aWRlcnMubWFwKGZ1bmN0aW9uIChfaXRlbSkgewogICAgcmV0dXJuIF9pdGVtLmh0dHA7CiAgfSkuZmlsdGVyKGZ1bmN0aW9uIChfdmFsdWUpIHsKICAgIHJldHVybiBfdmFsdWUgIT09IF9kZWZhdWx0SHR0cFByb3ZpZGVyOwogIH0pOwoKICBzaHVmZmxlKHByb3ZpZGVycyk7CiAgcmV0dXJuIHByb3ZpZGVyczsKfQoKdmFyIGFwb2xsb1Byb3ZpZGVycyA9IGFwcENvbmZpZy5hcG9sbG8ucHJvdmlkZXJzOwp2YXIgbWF4UmV0cnlMaW5rQXR0ZW1wdHMgPSBhcG9sbG9Qcm92aWRlcnMubGVuZ3RoOwp2YXIgZGVmYXVsdFByb3ZpZGVySW5kZXggPSBhcHBDb25maWcuYXBvbGxvLmRlZmF1bHRQcm92aWRlckluZGV4OwoKaWYgKGRlZmF1bHRQcm92aWRlckluZGV4ID09PSAncmFuZG9tJykgewogIGRlZmF1bHRQcm92aWRlckluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXBvbGxvUHJvdmlkZXJzLmxlbmd0aCk7Cn0KCnZhciBkZWZhdWx0SHR0cFByb3ZpZGVyID0gYXBvbGxvUHJvdmlkZXJzW2RlZmF1bHRQcm92aWRlckluZGV4XS5odHRwOwp2YXIgaHR0cFByb3ZpZGVyID0gZGVmYXVsdEh0dHBQcm92aWRlcjsKdmFyIGh0dHBBcG9sbG9Qcm92aWRlcnMgPSBzZXRIdHRwQXBvbGxvUHJvdmlkZXJzKGFwb2xsb1Byb3ZpZGVycywgZGVmYXVsdEh0dHBQcm92aWRlcik7CnZhciBsYXN0T3BlcmF0aW9uTmFtZSA9ICcnOwoKZnVuY3Rpb24gcmVzZXRIdHRwQXBvbGxvUHJvdmlkZXJzKCkgewogIGh0dHBBcG9sbG9Qcm92aWRlcnMgPSBzZXRIdHRwQXBvbGxvUHJvdmlkZXJzKGFwb2xsb1Byb3ZpZGVycywgZGVmYXVsdEh0dHBQcm92aWRlcik7CiAgbGFzdE9wZXJhdGlvbk5hbWUgPSAnJzsKfQoKdmFyIGh0dHBMaW5rID0gbmV3IEh0dHBMaW5rKHsKICB1cmk6IGh0dHBQcm92aWRlcgp9KTsKZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRIdHRwUHJvdmlkZXIoKSB7CiAgcmV0dXJuIGh0dHBQcm92aWRlcjsKfQp2YXIgaHR0cFByb3ZpZGVyTWlkZGxld2FyZSA9IG5ldyBBcG9sbG9MaW5rKGZ1bmN0aW9uIChvcGVyYXRpb24sIGZvcndhcmQpIHsKICAvLyBhZGQgdGhlIGF1dGhvcml6YXRpb24gdG8gdGhlIGhlYWRlcnMKICBvcGVyYXRpb24uc2V0Q29udGV4dCh7CiAgICB1cmk6IGh0dHBQcm92aWRlcgogIH0pOwogIHJldHVybiBmb3J3YXJkKG9wZXJhdGlvbik7Cn0pOwp2YXIgZXJyb3JMaW5rID0gb25FcnJvcihmdW5jdGlvbiAoX3JlZikgewogIHZhciBncmFwaFFMRXJyb3JzID0gX3JlZi5ncmFwaFFMRXJyb3JzLAogICAgICBuZXR3b3JrRXJyb3IgPSBfcmVmLm5ldHdvcmtFcnJvcjsKICBpZiAoZ3JhcGhRTEVycm9ycykgZ3JhcGhRTEVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIG1lc3NhZ2UgPSBfcmVmMi5tZXNzYWdlLAogICAgICAgIGxvY2F0aW9ucyA9IF9yZWYyLmxvY2F0aW9ucywKICAgICAgICBwYXRoID0gX3JlZjIucGF0aDsKICAgIHJldHVybiBjb25zb2xlLmxvZygiW0dyYXBoUUwgZXJyb3JdOiBNZXNzYWdlOiAiLmNvbmNhdChtZXNzYWdlLCAiLCBMb2NhdGlvbjogIikuY29uY2F0KGxvY2F0aW9ucywgIiwgUGF0aDogIikuY29uY2F0KHBhdGgpKTsKICB9KTsKCiAgaWYgKG5ldHdvcmtFcnJvcikgewogICAgY29uc29sZS5sb2coIltOZXR3b3JrIGVycm9yXTogIi5jb25jYXQobmV0d29ya0Vycm9yKSk7CiAgICByZXNldEh0dHBBcG9sbG9Qcm92aWRlcnMoKTsKICB9Cn0pOwp2YXIgcmV0cnlMaW5rID0gbmV3IFJldHJ5TGluayh7CiAgZGVsYXk6IHsKICAgIGluaXRpYWw6IDM1MCwKICAgIG1heDogSW5maW5pdHksCiAgICBqaXR0ZXI6IGZhbHNlCiAgfSwKICBhdHRlbXB0czogewogICAgbWF4OiBtYXhSZXRyeUxpbmtBdHRlbXB0cywKICAgIHJldHJ5SWY6IGZ1bmN0aW9uIHJldHJ5SWYoX2Vycm9yLCBfb3BlcmF0aW9uKSB7CiAgICAgIC8vIGNoYW5nZSBodHRwIHByb3ZpZGVyCiAgICAgIGlmIChodHRwQXBvbGxvUHJvdmlkZXJzLmxlbmd0aCA+IDAgJiYgKCFsYXN0T3BlcmF0aW9uTmFtZSB8fCBfb3BlcmF0aW9uLm9wZXJhdGlvbk5hbWUgPT09IGxhc3RPcGVyYXRpb25OYW1lKSkgewogICAgICAgIGh0dHBQcm92aWRlciA9IGh0dHBBcG9sbG9Qcm92aWRlcnMucG9wKCk7CiAgICAgICAgbGFzdE9wZXJhdGlvbk5hbWUgPSBfb3BlcmF0aW9uLm9wZXJhdGlvbk5hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiAhIV9lcnJvcjsKICAgIH0KICB9Cn0pOwpleHBvcnQgdmFyIGFwb2xsb0NsaWVudCA9IG5ldyBBcG9sbG9DbGllbnQoewogIGxpbms6IEFwb2xsb0xpbmsuZnJvbShbZXJyb3JMaW5rLCByZXRyeUxpbmssIGNvbmNhdChodHRwUHJvdmlkZXJNaWRkbGV3YXJlLCBodHRwTGluayldKSwKICBjYWNoZTogbmV3IEluTWVtb3J5Q2FjaGUoKSwKICBjb25uZWN0VG9EZXZUb29sczogdHJ1ZQp9KTsKVnVlLnVzZShWdWVBcG9sbG8pOwpleHBvcnQgdmFyIGFwb2xsb1Byb3ZpZGVyID0gbmV3IFZ1ZUFwb2xsbyh7CiAgZGVmYXVsdENsaWVudDogYXBvbGxvQ2xpZW50LAogIGRlZmF1bHRPcHRpb25zOiB7CiAgICAkcXVlcnk6IHsKICAgICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknIC8vICdjYWNoZS1hbmQtbmV0d29yaycsICduZXR3b3JrLW9ubHknLCAnY2FjaGUtZmlyc3QnCgogICAgfQogIH0KfSk7"},{"version":3,"names":["Vue","ApolloClient","HttpLink","InMemoryCache","ApolloLink","concat","RetryLink","onError","VueApollo","appConfig","shuffle","setHttpApolloProviders","_providers","_defaultHttpProvider","providers","map","_item","http","filter","_value","apolloProviders","apollo","maxRetryLinkAttempts","length","defaultProviderIndex","Math","floor","random","defaultHttpProvider","httpProvider","httpApolloProviders","lastOperationName","resetHttpApolloProviders","httpLink","uri","getCurrentHttpProvider","httpProviderMiddleware","operation","forward","setContext","errorLink","graphQLErrors","networkError","forEach","message","locations","path","console","log","retryLink","delay","initial","max","Infinity","jitter","attempts","retryIf","_error","_operation","operationName","pop","apolloClient","link","from","cache","connectToDevTools","use","apolloProvider","defaultClient","defaultOptions","$query","fetchPolicy"],"sources":["/mnt/websites/ex.nextsmartchain.com/src/plugins/apollo-provider.js"],"sourcesContent":["import Vue from 'vue'\nimport { ApolloClient } from 'apollo-client'\nimport { HttpLink } from 'apollo-link-http'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\n// New Imports\nimport { ApolloLink, concat } from 'apollo-link'\nimport { RetryLink } from \"apollo-link-retry\";\nimport { onError } from 'apollo-link-error';\n\nimport VueApollo from 'vue-apollo'\n\nimport appConfig from \"../../app.config.js\";\nimport {shuffle} from \"../utils/array.js\";\n\n/**\n * Create an array of shuffled http providers excluding default provider.\n *\n * @param {Array} _providers\n * @param {String} _defaultHttpProvider\n * @return {Array}\n */\nfunction setHttpApolloProviders(_providers, _defaultHttpProvider) {\n    const providers = _providers.map(_item => _item.http).filter(_value => _value !== _defaultHttpProvider);\n\n    shuffle(providers);\n\n    return providers;\n}\n\nconst apolloProviders = appConfig.apollo.providers;\nconst maxRetryLinkAttempts = apolloProviders.length;\nlet defaultProviderIndex = appConfig.apollo.defaultProviderIndex;\n\nif (defaultProviderIndex === 'random') {\n    defaultProviderIndex = Math.floor(Math.random() * apolloProviders.length);\n}\n\nconst defaultHttpProvider = apolloProviders[defaultProviderIndex].http;\nlet httpProvider = defaultHttpProvider;\nlet httpApolloProviders = setHttpApolloProviders(apolloProviders, defaultHttpProvider);\nlet lastOperationName = '';\n\nfunction resetHttpApolloProviders() {\n    httpApolloProviders = setHttpApolloProviders(apolloProviders, defaultHttpProvider);\n    lastOperationName = '';\n}\n\nconst httpLink = new HttpLink({\n    uri: httpProvider\n});\n\nexport function getCurrentHttpProvider() {\n    return httpProvider;\n}\n\nconst httpProviderMiddleware = new ApolloLink((operation, forward) => {\n    // add the authorization to the headers\n    operation.setContext({\n        uri: httpProvider\n    });\n\n    return forward(operation);\n});\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n        graphQLErrors.forEach(({ message, locations, path }) =>\n            console.log(\n                `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n            ),\n        );\n    if (networkError) {\n        console.log(`[Network error]: ${networkError}`);\n        resetHttpApolloProviders();\n    }\n});\n\nconst retryLink = new RetryLink({\n    delay: {\n        initial: 350,\n        max: Infinity,\n        jitter: false\n    },\n    attempts: {\n        max: maxRetryLinkAttempts,\n        retryIf: (_error, _operation) => {\n            // change http provider\n            if ((httpApolloProviders.length > 0)\n                && (!lastOperationName || _operation.operationName === lastOperationName)) {\n                httpProvider = httpApolloProviders.pop();\n                lastOperationName = _operation.operationName;\n            }\n\n            return !!_error;\n        }\n    }\n});\n\nexport const apolloClient = new ApolloClient({\n    link: ApolloLink.from([\n        errorLink,\n        retryLink,\n        concat(httpProviderMiddleware, httpLink)\n    ]),\n    cache: new InMemoryCache(),\n    connectToDevTools: true\n});\n\nVue.use(VueApollo);\n\nexport const apolloProvider = new VueApollo({\n    defaultClient: apolloClient,\n    defaultOptions: {\n        $query: {\n            fetchPolicy: 'network-only'  // 'cache-and-network', 'network-only', 'cache-first'\n        }\n    }\n});\n"],"mappings":"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"}]}