{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js??ref--14-0!/mnt/websites/ex.nextsmartchain.com/src/utils/time.js","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/utils/time.js","mtime":1657708590090},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js","mtime":1655491290241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwp2YXIgdFJFID0gLyhcZCspKFtkd215XSkvOwovKioKICogQHBhcmFtIHtzdHJpbmd9IF9jb2RlIFZhbHVlICsgKGR8d3xtfHkpCiAqIEByZXR1cm5zIHt7dW5pdDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfXxudWxsfQogKi8KCmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpbWVDb2RlKF9jb2RlKSB7CiAgdmFyIG1hdGNoID0gdFJFLmV4ZWMoX2NvZGUgPyBfY29kZS50b0xvd2VyQ2FzZSgpIDogJycpOwoKICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID09PSAzKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogcGFyc2VJbnQobWF0Y2hbMV0pLAogICAgICB1bml0OiBtYXRjaFsyXQogICAgfTsKICB9CgogIHJldHVybiBudWxsOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXREYXlqc1VuaXRCeVNob3J0Y3V0KF91bml0KSB7CiAgdmFyIGRqc1VuaXQgPSAnJzsKCiAgaWYgKF91bml0ID09PSAndycpIHsKICAgIGRqc1VuaXQgPSAnd2Vlayc7CiAgfSBlbHNlIGlmIChfdW5pdCA9PT0gJ2QnKSB7CiAgICBkanNVbml0ID0gJ2RheSc7CiAgfSBlbHNlIGlmIChfdW5pdCA9PT0gJ20nKSB7CiAgICBkanNVbml0ID0gJ21vbnRoJzsKICB9IGVsc2UgaWYgKF91bml0ID09PSAneScpIHsKICAgIGRqc1VuaXQgPSAneWVhcic7CiAgfQoKICByZXR1cm4gZGpzVW5pdDsKfQovKioKICogR2V0IHRpbWUgc3BhbiBpbiB1bml4IHRpbWVzdGFtcC4KICoKICogQHBhcmFtIHtzdHJpbmd9IF9jb2RlIFZhbHVlICsgKGR8d3xtfHkpCiAqIEBwYXJhbSB7Kn0gW19lbmRzXSBEYXlqcwogKiBAcGFyYW0ge2Jvb2xlYW59IFtfdXRjXQogKiBAcmV0dXJucyB7KG51bWJlcnxudW1iZXIpW119CiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVTcGFuKF9jb2RlLCBfZW5kcykgewogIHZhciBfdXRjID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwoKICB2YXIgdGltZUNvZGUgPSBwYXJzZVRpbWVDb2RlKF9jb2RlKTsKICB2YXIgc3RhcnREYXRlVFMgPSAwOwogIHZhciBlbmREYXRlID0gX3V0YyA/IGRheWpzLnV0YyhfZW5kcykgOiBkYXlqcyhfZW5kcyk7CgogIGlmICh0aW1lQ29kZSkgewogICAgaWYgKHRpbWVDb2RlLnVuaXQgPT09ICd3JykgewogICAgICBzdGFydERhdGVUUyA9IGVuZERhdGUuc3VidHJhY3QodGltZUNvZGUudmFsdWUsICd3ZWVrJykuc3RhcnRPZignZGF5JykudW5peCgpOwogICAgfSBlbHNlIGlmICh0aW1lQ29kZS51bml0ID09PSAnbScpIHsKICAgICAgc3RhcnREYXRlVFMgPSBlbmREYXRlLnN1YnRyYWN0KHRpbWVDb2RlLnZhbHVlLCAnbW9udGgnKS5zdGFydE9mKCdkYXknKS51bml4KCk7CiAgICB9IGVsc2UgaWYgKHRpbWVDb2RlLnVuaXQgPT09ICd5JykgewogICAgICBzdGFydERhdGVUUyA9IGVuZERhdGUuc3VidHJhY3QodGltZUNvZGUudmFsdWUsICd5ZWFyJykuc3RhcnRPZignZGF5JykudW5peCgpOwogICAgfQogIH0KCiAgcmV0dXJuIFtzdGFydERhdGVUUywgZW5kRGF0ZS51bml4KCldOwp9Ci8qKgogKiBAcmV0dXJuIHtkYXlqcy5EYXlqc30KICovCgpleHBvcnQgZnVuY3Rpb24gbm93REpTKCkgewogIHJldHVybiBkYXlqcygpOwp9"},{"version":3,"names":["dayjs","tRE","parseTimeCode","_code","match","exec","toLowerCase","length","value","parseInt","unit","getDayjsUnitByShortcut","_unit","djsUnit","getTimeSpan","_ends","_utc","timeCode","startDateTS","endDate","utc","subtract","startOf","unix","nowDJS"],"sources":["/mnt/websites/ex.nextsmartchain.com/src/utils/time.js"],"sourcesContent":["import dayjs from 'dayjs';\n\nconst tRE = /(\\d+)([dwmy])/;\n\n/**\n * @param {string} _code Value + (d|w|m|y)\n * @returns {{unit: string, value: number}|null}\n */\nexport function parseTimeCode(_code) {\n    const match = tRE.exec(_code ? _code.toLowerCase() : '');\n\n    if (match && match.length === 3) {\n        return {\n            value: parseInt(match[1]),\n            unit: match[2],\n        };\n    }\n\n    return null;\n}\n\nexport function getDayjsUnitByShortcut(_unit) {\n    let djsUnit = '';\n\n    if (_unit === 'w') {\n        djsUnit = 'week';\n    } else if (_unit === 'd') {\n        djsUnit = 'day';\n    } else if (_unit === 'm') {\n        djsUnit = 'month';\n    } else if (_unit === 'y') {\n        djsUnit = 'year';\n    }\n\n    return djsUnit;\n}\n\n/**\n * Get time span in unix timestamp.\n *\n * @param {string} _code Value + (d|w|m|y)\n * @param {*} [_ends] Dayjs\n * @param {boolean} [_utc]\n * @returns {(number|number)[]}\n */\nexport function getTimeSpan(_code, _ends, _utc = true) {\n    const timeCode = parseTimeCode(_code);\n    let startDateTS = 0;\n    const endDate = _utc ? dayjs.utc(_ends) : dayjs(_ends);\n\n    if (timeCode) {\n        if (timeCode.unit === 'w') {\n            startDateTS = endDate.subtract(timeCode.value, 'week').startOf('day').unix();\n        } else if (timeCode.unit === 'm') {\n            startDateTS = endDate.subtract(timeCode.value, 'month').startOf('day').unix();\n        } else if (timeCode.unit === 'y') {\n            startDateTS = endDate.subtract(timeCode.value, 'year').startOf('day').unix();\n        }\n    }\n\n    return [startDateTS, endDate.unix()];\n}\n\n/**\n * @return {dayjs.Dayjs}\n */\nexport function nowDJS() {\n    return dayjs();\n}\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,GAAG,GAAG,eAAZ;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;EACjC,IAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASF,KAAK,GAAGA,KAAK,CAACG,WAAN,EAAH,GAAyB,EAAvC,CAAd;;EAEA,IAAIF,KAAK,IAAIA,KAAK,CAACG,MAAN,KAAiB,CAA9B,EAAiC;IAC7B,OAAO;MACHC,KAAK,EAAEC,QAAQ,CAACL,KAAK,CAAC,CAAD,CAAN,CADZ;MAEHM,IAAI,EAAEN,KAAK,CAAC,CAAD;IAFR,CAAP;EAIH;;EAED,OAAO,IAAP;AACH;AAED,OAAO,SAASO,sBAAT,CAAgCC,KAAhC,EAAuC;EAC1C,IAAIC,OAAO,GAAG,EAAd;;EAEA,IAAID,KAAK,KAAK,GAAd,EAAmB;IACfC,OAAO,GAAG,MAAV;EACH,CAFD,MAEO,IAAID,KAAK,KAAK,GAAd,EAAmB;IACtBC,OAAO,GAAG,KAAV;EACH,CAFM,MAEA,IAAID,KAAK,KAAK,GAAd,EAAmB;IACtBC,OAAO,GAAG,OAAV;EACH,CAFM,MAEA,IAAID,KAAK,KAAK,GAAd,EAAmB;IACtBC,OAAO,GAAG,MAAV;EACH;;EAED,OAAOA,OAAP;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,WAAT,CAAqBX,KAArB,EAA4BY,KAA5B,EAAgD;EAAA,IAAbC,IAAa,uEAAN,IAAM;;EACnD,IAAMC,QAAQ,GAAGf,aAAa,CAACC,KAAD,CAA9B;EACA,IAAIe,WAAW,GAAG,CAAlB;EACA,IAAMC,OAAO,GAAGH,IAAI,GAAGhB,KAAK,CAACoB,GAAN,CAAUL,KAAV,CAAH,GAAsBf,KAAK,CAACe,KAAD,CAA/C;;EAEA,IAAIE,QAAJ,EAAc;IACV,IAAIA,QAAQ,CAACP,IAAT,KAAkB,GAAtB,EAA2B;MACvBQ,WAAW,GAAGC,OAAO,CAACE,QAAR,CAAiBJ,QAAQ,CAACT,KAA1B,EAAiC,MAAjC,EAAyCc,OAAzC,CAAiD,KAAjD,EAAwDC,IAAxD,EAAd;IACH,CAFD,MAEO,IAAIN,QAAQ,CAACP,IAAT,KAAkB,GAAtB,EAA2B;MAC9BQ,WAAW,GAAGC,OAAO,CAACE,QAAR,CAAiBJ,QAAQ,CAACT,KAA1B,EAAiC,OAAjC,EAA0Cc,OAA1C,CAAkD,KAAlD,EAAyDC,IAAzD,EAAd;IACH,CAFM,MAEA,IAAIN,QAAQ,CAACP,IAAT,KAAkB,GAAtB,EAA2B;MAC9BQ,WAAW,GAAGC,OAAO,CAACE,QAAR,CAAiBJ,QAAQ,CAACT,KAA1B,EAAiC,MAAjC,EAAyCc,OAAzC,CAAiD,KAAjD,EAAwDC,IAAxD,EAAd;IACH;EACJ;;EAED,OAAO,CAACL,WAAD,EAAcC,OAAO,CAACI,IAAR,EAAd,CAAP;AACH;AAED;AACA;AACA;;AACA,OAAO,SAASC,MAAT,GAAkB;EACrB,OAAOxB,KAAK,EAAZ;AACH"}]}