{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js!/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js!/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js??ref--14-0!/mnt/websites/ex.nextsmartchain.com/src/mixins/polling.js","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/mixins/polling.js","mtime":1657708590758},{"path":"/mnt/websites/ex.nextsmartchain.com/babel.config.js","mtime":1657708595230},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/thread-loader/dist/cjs.js","mtime":1655491285854},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/eslint-loader/index.js","mtime":1655491290241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbW50L3dlYnNpdGVzL2V4Lm5leHRzbWFydGNoYWluLmNvbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9tbnQvd2Vic2l0ZXMvZXgubmV4dHNtYXJ0Y2hhaW4uY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwovLyBNaXhpbiBmb3IgcG9sbGluZwp2YXIgcGFnZUlzVmlzaWJsZSA9IHRydWU7CnZhciBwYWdlVmlzaWJpbGl0eWNoYW5nZVNldCA9IGZhbHNlOwoKZnVuY3Rpb24gc2V0VmlzaWJpbGl0eWNoYW5nZUxpc3RlbmVyKCkgewogIGlmICghcGFnZVZpc2liaWxpdHljaGFuZ2VTZXQpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHBhZ2VJc1Zpc2libGUgPSBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJzsKICAgIH0pOwogICAgcGFnZVZpc2liaWxpdHljaGFuZ2VTZXQgPSB0cnVlOwogIH0KfQoKdmFyIFBvbGxpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBvbGxpbmcoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9sbGluZyk7CgogICAgLy8gS2V5cyBhcmUgY29kZXMsIHZhbHVlcyBhcmUgaW50ZXJ2YWwgaWRzCiAgICB0aGlzLl9pbnRlcnZhbElkcyA9IHt9OyAvLyBUaW1lb3V0IG9mIGludGVydmFsIGluIG1pbGxpc2Vjb25kcwoKICAgIHRoaXMuX3RpbWVvdXQgPSAzMDAwOwoKICAgIGlmICghcGFnZVZpc2liaWxpdHljaGFuZ2VTZXQpIHsKICAgICAgc2V0VmlzaWJpbGl0eWNoYW5nZUxpc3RlbmVyKCk7CiAgICB9CiAgfQoKICBfY3JlYXRlQ2xhc3MoUG9sbGluZywgW3sKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaW50ZXJ2YWxJZHMgPSB0aGlzLl9pbnRlcnZhbElkczsKICAgICAgT2JqZWN0LmtleXMoaW50ZXJ2YWxJZHMpLmZvckVhY2goZnVuY3Rpb24gKF9jb2RlKSB7CiAgICAgICAgX3RoaXMuc3RvcChfY29kZSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBTdGFydCBwb2xsaW5nLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfY29kZQogICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2NhbGxiYWNrCiAgICAgKiBAcGFyYW0ge2ludH0gW190aW1lb3V0XQogICAgICovCgogIH0sIHsKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydChfY29kZSwgX2NhbGxiYWNrLCBfdGltZW91dCkgewogICAgICB0aGlzLnN0b3AoX2NvZGUpOwogICAgICB0aGlzLl9pbnRlcnZhbElkc1tfY29kZV0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHBhZ2VJc1Zpc2libGUpIHsKICAgICAgICAgIF9jYWxsYmFjaygpOwogICAgICAgIH0KICAgICAgfSwgX3RpbWVvdXQgfHwgdGhpcy5fdGltZW91dCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3AgcG9sbGluZy4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2NvZGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKF9jb2RlKSB7CiAgICAgIGlmIChfY29kZSBpbiB0aGlzLl9pbnRlcnZhbElkcykgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZHNbX2NvZGVdKTsKICAgICAgICBkZWxldGUgdGhpcy5faW50ZXJ2YWxJZHNbX2NvZGVdOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUG9sbGluZzsKfSgpOwoKZXhwb3J0IHZhciBwb2xsaW5nTWl4aW4gPSB7CiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuX3BvbGxpbmcgPSBuZXcgUG9sbGluZygpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLl9wb2xsaW5nKSB7CiAgICAgIHRoaXMuX3BvbGxpbmcuZGVzdHJveSgpOwoKICAgICAgdGhpcy5fcG9sbGluZyA9IG51bGw7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["pageIsVisible","pageVisibilitychangeSet","setVisibilitychangeListener","document","addEventListener","visibilityState","Polling","_intervalIds","_timeout","intervalIds","Object","keys","forEach","_code","stop","_callback","setInterval","clearInterval","pollingMixin","created","_polling","beforeDestroy","destroy"],"sources":["/mnt/websites/ex.nextsmartchain.com/src/mixins/polling.js"],"sourcesContent":["// Mixin for polling\n\nlet pageIsVisible = true;\nlet pageVisibilitychangeSet = false;\n\nfunction setVisibilitychangeListener() {\n    if (!pageVisibilitychangeSet) {\n        document.addEventListener(\"visibilitychange\", () => {\n            pageIsVisible = document.visibilityState === 'visible';\n        });\n\n        pageVisibilitychangeSet = true;\n    }\n}\n\nclass Polling {\n    constructor() {\n        // Keys are codes, values are interval ids\n        this._intervalIds = {};\n        // Timeout of interval in milliseconds\n        this._timeout = 3000;\n\n        if (!pageVisibilitychangeSet) {\n            setVisibilitychangeListener();\n        }\n    }\n\n    destroy() {\n        const intervalIds = this._intervalIds;\n\n        Object.keys(intervalIds).forEach((_code) => {\n            this.stop(_code);\n        });\n    }\n\n    /**\n     * Start polling.\n     *\n     * @param {string} _code\n     * @param {function} _callback\n     * @param {int} [_timeout]\n     */\n    start(_code, _callback, _timeout) {\n        this.stop(_code);\n\n        this._intervalIds[_code] = setInterval(() => {\n            if (pageIsVisible) {\n                _callback();\n            }\n        }, _timeout || this._timeout);\n    }\n\n    /**\n     * Stop polling.\n     *\n     * @param {string} _code\n     */\n    stop(_code) {\n        if (_code in this._intervalIds) {\n            clearInterval(this._intervalIds[_code]);\n            delete this._intervalIds[_code];\n        }\n    }\n}\n\nexport const pollingMixin = {\n    created() {\n        this._polling = new Polling();\n    },\n\n    beforeDestroy() {\n        if (this._polling) {\n            this._polling.destroy();\n            this._polling = null;\n        }\n    },\n};\n"],"mappings":";;;;;AAAA;AAEA,IAAIA,aAAa,GAAG,IAApB;AACA,IAAIC,uBAAuB,GAAG,KAA9B;;AAEA,SAASC,2BAAT,GAAuC;EACnC,IAAI,CAACD,uBAAL,EAA8B;IAC1BE,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;MAChDJ,aAAa,GAAGG,QAAQ,CAACE,eAAT,KAA6B,SAA7C;IACH,CAFD;IAIAJ,uBAAuB,GAAG,IAA1B;EACH;AACJ;;IAEKK,O;EACF,mBAAc;IAAA;;IACV;IACA,KAAKC,YAAL,GAAoB,EAApB,CAFU,CAGV;;IACA,KAAKC,QAAL,GAAgB,IAAhB;;IAEA,IAAI,CAACP,uBAAL,EAA8B;MAC1BC,2BAA2B;IAC9B;EACJ;;;;WAED,mBAAU;MAAA;;MACN,IAAMO,WAAW,GAAG,KAAKF,YAAzB;MAEAG,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,OAAzB,CAAiC,UAACC,KAAD,EAAW;QACxC,KAAI,CAACC,IAAL,CAAUD,KAAV;MACH,CAFD;IAGH;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;;WACI,eAAMA,KAAN,EAAaE,SAAb,EAAwBP,QAAxB,EAAkC;MAC9B,KAAKM,IAAL,CAAUD,KAAV;MAEA,KAAKN,YAAL,CAAkBM,KAAlB,IAA2BG,WAAW,CAAC,YAAM;QACzC,IAAIhB,aAAJ,EAAmB;UACfe,SAAS;QACZ;MACJ,CAJqC,EAInCP,QAAQ,IAAI,KAAKA,QAJkB,CAAtC;IAKH;IAED;AACJ;AACA;AACA;AACA;;;;WACI,cAAKK,KAAL,EAAY;MACR,IAAIA,KAAK,IAAI,KAAKN,YAAlB,EAAgC;QAC5BU,aAAa,CAAC,KAAKV,YAAL,CAAkBM,KAAlB,CAAD,CAAb;QACA,OAAO,KAAKN,YAAL,CAAkBM,KAAlB,CAAP;MACH;IACJ;;;;;;AAGL,OAAO,IAAMK,YAAY,GAAG;EACxBC,OADwB,qBACd;IACN,KAAKC,QAAL,GAAgB,IAAId,OAAJ,EAAhB;EACH,CAHuB;EAKxBe,aALwB,2BAKR;IACZ,IAAI,KAAKD,QAAT,EAAmB;MACf,KAAKA,QAAL,CAAcE,OAAd;;MACA,KAAKF,QAAL,GAAgB,IAAhB;IACH;EACJ;AAVuB,CAArB"}]}