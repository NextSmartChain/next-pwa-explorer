{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/data-tables/EpochList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/data-tables/EpochList.vue","mtime":1657708591694},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBGRGF0YVRhYmxlIGZyb20gIi4uL2NvbXBvbmVudHMvY29yZS9GRGF0YVRhYmxlL0ZEYXRhVGFibGUudnVlIjsKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCB7IFdFSVRvRlRNIH0gZnJvbSAiLi4vdXRpbHMvdHJhbnNhY3Rpb25zLmpzIjsKaW1wb3J0IHt0aW1lc3RhbXBUb0RhdGUsIGZvcm1hdEhleFRvSW50LCBmb3JtYXREYXRlIH0gZnJvbSAiLi4vZmlsdGVycy5qcyI7CmltcG9ydCB7Y2xvbmVPYmplY3R9IGZyb20gIkAvdXRpbHMiOwppbXBvcnQgRlRva2VuVmFsdWUgZnJvbSAiQC9jb21wb25lbnRzL2NvcmUvRlRva2VuVmFsdWUvRlRva2VuVmFsdWUudnVlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJFcG9jaExpc3QiLAoKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBGVG9rZW5WYWx1ZSwKICAgICAgICBGRGF0YVRhYmxlCiAgICB9LAoKICAgIHByb3BzOiB7CiAgICAgICAgLyoqIE51bWJlciBvZiBpdGVtcyBwZXIgcGFnZS4gKi8KICAgICAgICBpdGVtc1BlclBhZ2U6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICBkZWZhdWx0OiA0MAogICAgICAgIH0KICAgIH0sCgogICAgYXBvbGxvOiB7CiAgICAgICAgZXBvY2hzOiB7CiAgICAgICAgICAgIHF1ZXJ5OiBncWxgCiAgICAgICAgICAgICAgICBxdWVyeSBFcG9jaExpc3QoJGN1cnNvcjogQ3Vyc29yLCAkY291bnQ6IEludCEpIHsKICAgICAgICAgICAgICAgICAgICBlcG9jaHMoY3Vyc29yOiAkY3Vyc29yLCBjb3VudDogJGNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUluZm8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc05leHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1ByZXZpb3VzCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWRnZXMgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXBvY2ggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVwb2NoRmVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgYCwKICAgICAgICAgICAgdmFyaWFibGVzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuaXRlbXNQZXJQYWdlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXN1bHQoX2RhdGEsIF9rZXkpIHsKICAgICAgICAgICAgICAgIGxldCBkYXRhOwoKICAgICAgICAgICAgICAgIGlmIChfa2V5ID09PSAiZXBvY2hzIikgewogICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfZGF0YS5kYXRhLmVwb2NoczsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRnZXMgPSBjbG9uZU9iamVjdChkYXRhLmVkZ2VzKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kSGFzTmV4dCA9IGRhdGEucGFnZUluZm8uaGFzTmV4dDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZEl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRJdGVtcyA9IGVkZ2VzOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4xID0gZWRnZXMubGVuZ3RoOyBpIDwgbGVuMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRJdGVtcy5wdXNoKGVkZ2VzW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgInJlY29yZHMtY291bnQiLAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRIZXhUb0ludChkYXRhLnRvdGFsQ291bnQpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IoX2Vycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5RXJyb3IgPSBfZXJyb3IubWVzc2FnZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCgogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkSXRlbXM6IFtdLAogICAgICAgICAgICBkSGFzTmV4dDogZmFsc2UsCiAgICAgICAgICAgIHF1ZXJ5RXJyb3I6ICIiLAogICAgICAgICAgICBkQ29sdW1uczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJpZCIsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2Vwb2NoLmVwb2NoJyksCiAgICAgICAgICAgICAgICAgICAgaXRlbVByb3A6ICJlcG9jaC5pZCIsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMjBweCcsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBfdmFsdWUgPT4gcGFyc2VJbnQoX3ZhbHVlLCAxNikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2VuZFRpbWUnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdlcG9jaC5lbmRfdGltZScpLAogICAgICAgICAgICAgICAgICAgIGl0ZW1Qcm9wOiAnZXBvY2guZW5kVGltZScsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAoX3ZhbHVlKSA9PiBmb3JtYXREYXRlKHRpbWVzdGFtcFRvRGF0ZShfdmFsdWUpKSwKICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzM0MHB4JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8qewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdiYXNlUmV3YXJkJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnZXBvY2gudG90YWxfYmFzZV9yZXdhcmQnKSArICcgKE5FWFQpJywKICAgICAgICAgICAgICAgICAgICBpdGVtUHJvcDogJ2Vwb2NoLnRvdGFsQmFzZVJld2FyZFdlaWdodCcsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAoX3ZhbHVlKSA9PiBmb3JtYXROdW1iZXJCeUxvY2FsZShXRUlUb0ZUTShfdmFsdWUpLCAxLCAyKSwKICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2FsaWduLWVuZCcsCiAgICAgICAgICAgICAgICB9LCovCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2ZlZScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2Vwb2NoLnRvdGFsX2ZlZScpICsgJyAoTkVYVCknLAogICAgICAgICAgICAgICAgICAgIGl0ZW1Qcm9wOiAnZXBvY2guZXBvY2hGZWUnLAogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKF92YWx1ZSkgPT4gV0VJVG9GVE0oX3ZhbHVlKSwKICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2FsaWduLWVuZCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLyp7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3R4UmV3YXJkJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnZXBvY2gudG90YWxfdHhfcmV3YXJkJykgKyAnIChORVhUKScsCiAgICAgICAgICAgICAgICAgICAgaXRlbVByb3A6ICdlcG9jaC50b3RhbFR4UmV3YXJkV2VpZ2h0JywKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IChfdmFsdWUpID0+IGZvcm1hdE51bWJlckJ5TG9jYWxlKFdFSVRvRlRNKF92YWx1ZSksIDEsIDIpLAogICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnYWxpZ24tZW5kJywKICAgICAgICAgICAgICAgIH0qLwogICAgICAgICAgICBdCiAgICAgICAgfTsKICAgIH0sCgogICAgY29tcHV0ZWQ6IHsKICAgICAgICAvKioKICAgICAgICAgKiBQcm9wZXJ0eSBpcyBzZXQgdG8gYHRydWVgLCBpZiAnY29udHJhY3QtbGlzdC1kdC1tb2JpbGUtdmlldycgYnJlYWtwb2ludCBpcyByZWFjaGVkLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0KICAgICAgICAgKi8KICAgICAgICBjTW9iaWxlVmlldygpIHsKICAgICAgICAgICAgY29uc3QgZGF0YVRhYmxlQnJlYWtwb2ludCA9IHRoaXMuJHN0b3JlLnN0YXRlLmJyZWFrcG9pbnRzWydjb250cmFjdC1saXN0LWR0LW1vYmlsZS12aWV3J107CgogICAgICAgICAgICByZXR1cm4gKGRhdGFUYWJsZUJyZWFrcG9pbnQgJiYgZGF0YVRhYmxlQnJlYWtwb2ludC5tYXRjaGVzKTsKICAgICAgICB9LAoKICAgICAgICBjTG9hZGluZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGFwb2xsby5xdWVyaWVzLmVwb2Nocy5sb2FkaW5nOwogICAgICAgIH0KICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIGZldGNoTW9yZSgpIHsKICAgICAgICAgICAgY29uc3QgeyBlcG9jaHMgfSA9IHRoaXM7CgogICAgICAgICAgICBpZiAoZXBvY2hzICYmIGVwb2Nocy5wYWdlSW5mbyAmJiBlcG9jaHMucGFnZUluZm8uaGFzTmV4dCkgewogICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZXBvY2hzLnBhZ2VJbmZvLmxhc3Q7CgogICAgICAgICAgICAgICAgdGhpcy4kYXBvbGxvLnF1ZXJpZXMuZXBvY2hzLmZldGNoTW9yZSh7CiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvciwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuaXRlbXNQZXJQYWdlCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1cGRhdGVRdWVyeTogKHByZXZpb3VzUmVzdWx0LCB7IGZldGNoTW9yZVJlc3VsdCB9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaE1vcmVSZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBXRUlUb0ZUTSwKICAgICAgICB0aW1lc3RhbXBUb0RhdGUKICAgIH0KfTsK"},{"version":3,"sources":["EpochList.vue"],"names":[],"mappings":";AA6DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"EpochList.vue","sourceRoot":"src/data-tables","sourcesContent":["<template>\n    <div class=\"epochlist\">\n        <template v-if=\"!queryError\">\n            <f-data-table\n                :columns=\"dColumns\"\n                :items=\"dItems\"\n                :disable-infinite-scroll=\"!dHasNext\"\n                :loading=\"cLoading\"\n                :mobile-view=\"cMobileView\"\n                infinite-scroll\n                fixed-header\n                class=\"f-data-table-body-bg-color\"\n                @fetch-more=\"fetchMore\"\n            >\n                <template v-slot:column-id=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-4 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col-8\">\n                            <router-link :to=\"{name: 'epoch-detail', params: {id: value}}\">\n                                {{ value }}\n                            </router-link>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'epoch-detail', params: {id: value}}\">\n                            {{ value }}\n                        </router-link>\n                    </template>\n                </template>\n\n                <template v-slot:column-fee=\"{ value, item, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-4 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col-8 break-word\">\n                            <f-token-value\n                                :value=\"value\"\n                                :decimals=\"2\"\n                                :use-placeholder=\"false\"\n                                no-currency\n                            />\n                        </div>\n                    </div>\n                    <template v-else>\n                        <f-token-value\n                            :value=\"value\"\n                            :decimals=\"2\"\n                            :use-placeholder=\"false\"\n                            no-currency\n                        />\n                    </template>\n                </template>\n            </f-data-table>\n        </template>\n\n        <template v-else>\n            <div class=\"query-error\">{{ queryError }}</div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport FDataTable from \"../components/core/FDataTable/FDataTable.vue\";\nimport gql from \"graphql-tag\";\nimport { WEIToFTM } from \"../utils/transactions.js\";\nimport {timestampToDate, formatHexToInt, formatDate } from \"../filters.js\";\nimport {cloneObject} from \"@/utils\";\nimport FTokenValue from \"@/components/core/FTokenValue/FTokenValue.vue\";\n\nexport default {\n    name: \"EpochList\",\n\n    components: {\n        FTokenValue,\n        FDataTable\n    },\n\n    props: {\n        /** Number of items per page. */\n        itemsPerPage: {\n            type: Number,\n            default: 40\n        }\n    },\n\n    apollo: {\n        epochs: {\n            query: gql`\n                query EpochList($cursor: Cursor, $count: Int!) {\n                    epochs(cursor: $cursor, count: $count) {\n                        totalCount\n                        pageInfo {\n                            first\n                            last\n                            hasNext\n                            hasPrevious\n                        }\n                        edges {\n                            epoch {\n                                id\n                                endTime\n                                epochFee\n                            }\n                            cursor\n                        }\n                    }\n                }\n            `,\n            variables() {\n                return {\n                    cursor: null,\n                    count: this.itemsPerPage\n                };\n            },\n            result(_data, _key) {\n                let data;\n\n                if (_key === \"epochs\") {\n                    data = _data.data.epochs;\n\n                    const edges = cloneObject(data.edges);\n\n                    this.dHasNext = data.pageInfo.hasNext;\n\n                    if (this.dItems.length === 0) {\n                        this.dItems = edges;\n                    } else {\n                        for (let i = 0, len1 = edges.length; i < len1; i++) {\n                            this.dItems.push(edges[i]);\n                        }\n                    }\n\n                    this.$emit(\n                        \"records-count\",\n                        formatHexToInt(data.totalCount)\n                    );\n                }\n            },\n            error(_error) {\n                this.queryError = _error.message;\n            }\n        }\n    },\n\n    data() {\n        return {\n            dItems: [],\n            dHasNext: false,\n            queryError: \"\",\n            dColumns: [\n                {\n                    name: \"id\",\n                    label: this.$t('epoch.epoch'),\n                    itemProp: \"epoch.id\",\n                    width: '120px',\n                    formatter: _value => parseInt(_value, 16)\n                },\n                {\n                    name: 'endTime',\n                    label: this.$t('epoch.end_time'),\n                    itemProp: 'epoch.endTime',\n                    formatter: (_value) => formatDate(timestampToDate(_value)),\n                    width: '340px'\n                },\n                /*{\n                    name: 'baseReward',\n                    label: this.$t('epoch.total_base_reward') + ' (NEXT)',\n                    itemProp: 'epoch.totalBaseRewardWeight',\n                    formatter: (_value) => formatNumberByLocale(WEIToFTM(_value), 1, 2),\n                    cssClass: 'align-end',\n                },*/\n                {\n                    name: 'fee',\n                    label: this.$t('epoch.total_fee') + ' (NEXT)',\n                    itemProp: 'epoch.epochFee',\n                    formatter: (_value) => WEIToFTM(_value),\n                    cssClass: 'align-end',\n                },\n                /*{\n                    name: 'txReward',\n                    label: this.$t('epoch.total_tx_reward') + ' (NEXT)',\n                    itemProp: 'epoch.totalTxRewardWeight',\n                    formatter: (_value) => formatNumberByLocale(WEIToFTM(_value), 1, 2),\n                    cssClass: 'align-end',\n                }*/\n            ]\n        };\n    },\n\n    computed: {\n        /**\n         * Property is set to `true`, if 'contract-list-dt-mobile-view' breakpoint is reached.\n         *\n         * @return {Boolean}\n         */\n        cMobileView() {\n            const dataTableBreakpoint = this.$store.state.breakpoints['contract-list-dt-mobile-view'];\n\n            return (dataTableBreakpoint && dataTableBreakpoint.matches);\n        },\n\n        cLoading() {\n            return this.$apollo.queries.epochs.loading;\n        }\n    },\n\n    methods: {\n        fetchMore() {\n            const { epochs } = this;\n\n            if (epochs && epochs.pageInfo && epochs.pageInfo.hasNext) {\n                const cursor = epochs.pageInfo.last;\n\n                this.$apollo.queries.epochs.fetchMore({\n                    variables: {\n                        cursor,\n                        count: this.itemsPerPage\n                    },\n                    updateQuery: (previousResult, { fetchMoreResult }) => {\n                        return fetchMoreResult;\n                    }\n                });\n            }\n        },\n\n        WEIToFTM,\n        timestampToDate\n    }\n};\n</script>\n"]}]}