{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/data-tables/FContractList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/data-tables/FContractList.vue","mtime":1657708591538},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBGRGF0YVRhYmxlIGZyb20gIi4uL2NvbXBvbmVudHMvY29yZS9GRGF0YVRhYmxlL0ZEYXRhVGFibGUudnVlIjsKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCB7IFdFSVRvRlRNIH0gZnJvbSAiLi4vdXRpbHMvdHJhbnNhY3Rpb25zLmpzIjsKaW1wb3J0IHt0aW1lc3RhbXBUb0RhdGUsIGZvcm1hdEhleFRvSW50LCBmb3JtYXREYXRlfSBmcm9tICIuLi9maWx0ZXJzLmpzIjsKaW1wb3J0IEZFbGxpcHNpcyBmcm9tICIuLi9jb21wb25lbnRzL2NvcmUvRkVsbGlwc2lzL0ZFbGxpcHNpcy52dWUiOwppbXBvcnQge2Nsb25lT2JqZWN0fSBmcm9tICJAL3V0aWxzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJGQ29udHJhY3RMaXN0IiwKCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgRkVsbGlwc2lzLAogICAgICAgIEZEYXRhVGFibGUKICAgIH0sCgogICAgcHJvcHM6IHsKICAgICAgICAvKiogTnVtYmVyIG9mIGl0ZW1zIHBlciBwYWdlLiAqLwogICAgICAgIGl0ZW1zUGVyUGFnZTogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IDQwCiAgICAgICAgfQogICAgfSwKCiAgICBhcG9sbG86IHsKICAgICAgICBjb250cmFjdHM6IHsKICAgICAgICAgICAgcXVlcnk6IGdxbGAKICAgICAgICAgICAgICAgIHF1ZXJ5IENvbnRyYWN0TGlzdCgkY3Vyc29yOiBDdXJzb3IsICRjb3VudDogSW50ISkgewogICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0cyhjdXJzb3I6ICRjdXJzb3IsIGNvdW50OiAkY291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudAogICAgICAgICAgICAgICAgICAgICAgICBwYWdlSW5mbyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJldmlvdXMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlZGdlcyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmFjdCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGxveWVkQnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBgLAogICAgICAgICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogbnVsbCwKICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5pdGVtc1BlclBhZ2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc3VsdChfZGF0YSwgX2tleSkgewogICAgICAgICAgICAgICAgbGV0IGRhdGE7CgogICAgICAgICAgICAgICAgaWYgKF9rZXkgPT09ICJjb250cmFjdHMiKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJz8/PycpOwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfZGF0YS5kYXRhLmNvbnRyYWN0czsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRnZXMgPSBjbG9uZU9iamVjdChkYXRhLmVkZ2VzKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kSGFzTmV4dCA9IGRhdGEucGFnZUluZm8uaGFzTmV4dDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZEl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRJdGVtcyA9IGVkZ2VzOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4xID0gZWRnZXMubGVuZ3RoOyBpIDwgbGVuMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRJdGVtcy5wdXNoKGVkZ2VzW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgInJlY29yZHMtY291bnQiLAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRIZXhUb0ludChkYXRhLnRvdGFsQ291bnQpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IoX2Vycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRDb250cmFjdExpc3RFcnJvciA9IF9lcnJvci5tZXNzYWdlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRJdGVtczogW10sCiAgICAgICAgICAgIGRIYXNOZXh0OiBmYWxzZSwKICAgICAgICAgICAgZENvbnRyYWN0TGlzdEVycm9yOiAiIiwKICAgICAgICAgICAgZENvbHVtbnM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYWRkcmVzc25hbWUiLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBgJHt0aGlzLiR0KCJ2aWV3X2NvbnRyYWN0X2xpc3QuYWRkcmVzcyIpfSAvICR7dGhpcy4kdCgidmlld19jb250cmFjdF9saXN0Lm5hbWUiKX1gLAogICAgICAgICAgICAgICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QiLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNDAwcHgnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAidmFsaWRhdGVkIiwKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgidmlld19jb250cmFjdF9saXN0LnZhbGlkYXRlZCIpLAogICAgICAgICAgICAgICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QudmFsaWRhdGVkIiwKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IChfdmFsdWUpID0+IGZvcm1hdERhdGUodGltZXN0YW1wVG9EYXRlKF92YWx1ZSkpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAidGltZXN0YW1wIiwKICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kdCgidmlld19jb250cmFjdF9saXN0LnRpbWVzdGFtcCIpLAogICAgICAgICAgICAgICAgICAgIGl0ZW1Qcm9wOiAiY29udHJhY3QudGltZXN0YW1wIiwKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IChfdmFsdWUpID0+IGZvcm1hdERhdGUodGltZXN0YW1wVG9EYXRlKF92YWx1ZSkpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXQogICAgICAgIH07CiAgICB9LAoKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLyoqCiAgICAgICAgICogUHJvcGVydHkgaXMgc2V0IHRvIGB0cnVlYCwgaWYgJ2NvbnRyYWN0LWxpc3QtZHQtbW9iaWxlLXZpZXcnIGJyZWFrcG9pbnQgaXMgcmVhY2hlZC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59CiAgICAgICAgICovCiAgICAgICAgY01vYmlsZVZpZXcoKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGFUYWJsZUJyZWFrcG9pbnQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5icmVha3BvaW50c1snY29udHJhY3QtbGlzdC1kdC1tb2JpbGUtdmlldyddOwoKICAgICAgICAgICAgcmV0dXJuIChkYXRhVGFibGVCcmVha3BvaW50ICYmIGRhdGFUYWJsZUJyZWFrcG9pbnQubWF0Y2hlcyk7CiAgICAgICAgfSwKCiAgICAgICAgY0xvYWRpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRhcG9sbG8ucXVlcmllcy5jb250cmFjdHMubG9hZGluZzsKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBmZXRjaE1vcmUoKSB7CiAgICAgICAgICAgIGNvbnN0IHsgY29udHJhY3RzIH0gPSB0aGlzOwoKICAgICAgICAgICAgaWYgKGNvbnRyYWN0cyAmJiBjb250cmFjdHMucGFnZUluZm8gJiYgY29udHJhY3RzLnBhZ2VJbmZvLmhhc05leHQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGNvbnRyYWN0cy5wYWdlSW5mby5sYXN0OwoKICAgICAgICAgICAgICAgIHRoaXMuJGFwb2xsby5xdWVyaWVzLmNvbnRyYWN0cy5mZXRjaE1vcmUoewogICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLml0ZW1zUGVyUGFnZQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUXVlcnk6IChwcmV2aW91c1Jlc3VsdCwgeyBmZXRjaE1vcmVSZXN1bHQgfSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hNb3JlUmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgV0VJVG9GVE0sCiAgICAgICAgdGltZXN0YW1wVG9EYXRlCiAgICB9Cn07Cg=="},{"version":3,"sources":["FContractList.vue"],"names":[],"mappings":";AAyCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"FContractList.vue","sourceRoot":"src/data-tables","sourcesContent":["<template>\n    <div class=\"contract-list-dt\">\n        <template v-if=\"!dContractListError\">\n            <f-data-table\n                :columns=\"dColumns\"\n                :items=\"dItems\"\n                :disable-infinite-scroll=\"!dHasNext\"\n                :loading=\"cLoading\"\n                :mobile-view=\"cMobileView\"\n                infinite-scroll\n                fixed-header\n                class=\"f-data-table-body-bg-color\"\n                @fetch-more=\"fetchMore\"\n            >\n                <template v-slot:column-addressname=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-4 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col-8\">\n                            <router-link :to=\"{name: 'address-detail', params: {id: value.address}}\" :title=\"value.address\">\n                                <f-ellipsis :text=\"value.address\" overflow=\"middle\" />\n                            </router-link>\n                            <span class=\"contract-name\">{{ value.name }}</span>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'address-detail', params: {id: value.address}}\" :title=\"value.address\">\n                            <f-ellipsis :text=\"value.address\" overflow=\"middle\" />\n                        </router-link>\n                        <span class=\"contract-name\">{{ value.name }}</span>\n                    </template>\n                </template>\n            </f-data-table>\n        </template>\n\n        <template v-else>\n            <div class=\"query-error\">{{ dContractListError }}</div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport FDataTable from \"../components/core/FDataTable/FDataTable.vue\";\nimport gql from \"graphql-tag\";\nimport { WEIToFTM } from \"../utils/transactions.js\";\nimport {timestampToDate, formatHexToInt, formatDate} from \"../filters.js\";\nimport FEllipsis from \"../components/core/FEllipsis/FEllipsis.vue\";\nimport {cloneObject} from \"@/utils\";\n\nexport default {\n    name: \"FContractList\",\n\n    components: {\n        FEllipsis,\n        FDataTable\n    },\n\n    props: {\n        /** Number of items per page. */\n        itemsPerPage: {\n            type: Number,\n            default: 40\n        }\n    },\n\n    apollo: {\n        contracts: {\n            query: gql`\n                query ContractList($cursor: Cursor, $count: Int!) {\n                    contracts(cursor: $cursor, count: $count) {\n                        totalCount\n                        pageInfo {\n                            first\n                            last\n                            hasNext\n                            hasPrevious\n                        }\n                        edges {\n                            contract {\n                                address\n                                deployedBy {\n                                    hash\n                                }\n                                transactionHash\n                                name\n                                version\n                                compiler\n                                validated\n                                timestamp\n                            }\n                            cursor\n                        }\n                    }\n                }\n            `,\n            variables() {\n                return {\n                    cursor: null,\n                    count: this.itemsPerPage\n                };\n            },\n            result(_data, _key) {\n                let data;\n\n                if (_key === \"contracts\") {\n                    // console.log('???');\n                    data = _data.data.contracts;\n\n                    const edges = cloneObject(data.edges);\n\n                    this.dHasNext = data.pageInfo.hasNext;\n\n                    if (this.dItems.length === 0) {\n                        this.dItems = edges;\n                    } else {\n                        for (let i = 0, len1 = edges.length; i < len1; i++) {\n                            this.dItems.push(edges[i]);\n                        }\n                    }\n\n                    this.$emit(\n                        \"records-count\",\n                        formatHexToInt(data.totalCount)\n                    );\n                }\n            },\n            error(_error) {\n                this.dContractListError = _error.message;\n            }\n        }\n    },\n\n    data() {\n        return {\n            dItems: [],\n            dHasNext: false,\n            dContractListError: \"\",\n            dColumns: [\n                {\n                    name: \"addressname\",\n                    label: `${this.$t(\"view_contract_list.address\")} / ${this.$t(\"view_contract_list.name\")}`,\n                    itemProp: \"contract\",\n                    width: '400px',\n                },\n                {\n                    name: \"validated\",\n                    label: this.$t(\"view_contract_list.validated\"),\n                    itemProp: \"contract.validated\",\n                    formatter: (_value) => formatDate(timestampToDate(_value)),\n                },\n                {\n                    name: \"timestamp\",\n                    label: this.$t(\"view_contract_list.timestamp\"),\n                    itemProp: \"contract.timestamp\",\n                    formatter: (_value) => formatDate(timestampToDate(_value)),\n                },\n            ]\n        };\n    },\n\n    computed: {\n        /**\n         * Property is set to `true`, if 'contract-list-dt-mobile-view' breakpoint is reached.\n         *\n         * @return {Boolean}\n         */\n        cMobileView() {\n            const dataTableBreakpoint = this.$store.state.breakpoints['contract-list-dt-mobile-view'];\n\n            return (dataTableBreakpoint && dataTableBreakpoint.matches);\n        },\n\n        cLoading() {\n            return this.$apollo.queries.contracts.loading;\n        }\n    },\n\n    methods: {\n        fetchMore() {\n            const { contracts } = this;\n\n            if (contracts && contracts.pageInfo && contracts.pageInfo.hasNext) {\n                const cursor = contracts.pageInfo.last;\n\n                this.$apollo.queries.contracts.fetchMore({\n                    variables: {\n                        cursor,\n                        count: this.itemsPerPage\n                    },\n                    updateQuery: (previousResult, { fetchMoreResult }) => {\n                        return fetchMoreResult;\n                    }\n                });\n            }\n        },\n\n        WEIToFTM,\n        timestampToDate\n    }\n};\n</script>\n\n<style lang=\"scss\">\n    .contract-list-dt {\n        .contract-name {\n            display: block;\n            padding-top: 4px;\n        }\n    }\n</style>\n"]}]}