{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/data-tables/FTransactionList.vue?vue&type=style&index=0&id=afd32e0e&prod&lang=scss&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/data-tables/FTransactionList.vue","mtime":1657708591482},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/css-loader/dist/cjs.js","mtime":1655491291170},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1657708714280},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/postcss-loader/src/index.js","mtime":1655491291810},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/sass-loader/dist/cjs.js","mtime":1657625857833},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50cmFuc2FjdGlvbi1saXN0LWR0IHsKCiAgICAudG9rZW50eHMgewogICAgICAgIG1hcmdpbi10b3A6IC0yMHB4OwogICAgfQoKICAgIC50b2tlbnR4cyBzdW1tYXJ5IHsKICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CgogICAgLnRva2VuLXRyYW5zYWN0aW9uLWl0ZW0gewogICAgICAgIG1hcmdpbi1sZWZ0OiAyMDBweDsKICAgIH0KCiAgICAubW9iaWxlLWl0ZW0gewogICAgICAgIC50b2tlbnR4cyB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7CgogICAgICAgICAgICAudG9rZW4tdHJhbnNhY3Rpb24taXRlbSB7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMC44OwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDsKICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAwOwoKICAgICAgICAgICAgICAgIGEgewogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTIwcHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["FTransactionList.vue"],"names":[],"mappings":";AA+hBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FTransactionList.vue","sourceRoot":"src/data-tables","sourcesContent":["<template>\n    <div class=\"transaction-list-dt\">\n        <template v-if=\"!dTransactionListError\">\n            <f-data-table\n                :columns=\"dColumns\"\n                :hidden-columns=\"hiddenColumns\"\n                :items=\"dItems\"\n                :mobile-view=\"cMobileView\"\n                :disable-infinite-scroll=\"!dHasNext\"\n                :loading=\"cLoading\"\n                :f-card-off=\"fCardOff\"\n                first-m-v-column-width=\"5\"\n                infinite-scroll\n                fixed-header\n                v-bind=\"{...$attrs, ...$props}\"\n                class=\"f-data-table-body-bg-color\"\n                @fetch-more=\"onFetchMore\"\n            >\n<!--\n                <template v-slot:column-created=\"{ value, column }\">\n                    <template v-if=\"column\">\n                        {{ value | formatDate }}\n                    </template>\n                    <template v-else>\n                        {{ value | formatDate }}\n                    </template>\n                </template>\n-->\n\n                <template v-slot:column-hash=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\">\n                            <router-link :to=\"{name: 'transaction-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'transaction-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link>\n                    </template>\n                </template>\n\n<!--\n                <template v-slot:column-block=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\"><router-link :to=\"{name: 'block-detail', params: {id: value}}\" :title=\"value\">{{value}}</router-link></div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'block-detail', params: {id: value}}\" :title=\"value\">{{value}}</router-link>\n                    </template>\n                </template>\n-->\n\n                <template v-slot:column-timestamp=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\">\n                            <timeago :datetime=\"timestampToDate(value)\" :auto-update=\"1\" :converter-options=\"{includeSeconds: true}\"></timeago>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <timeago :datetime=\"timestampToDate(value)\" :auto-update=\"1\" :converter-options=\"{includeSeconds: true}\"></timeago>\n                    </template>\n                </template>\n\n                <template v-slot:column-address=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\"><router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link></div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link>\n                    </template>\n                </template>\n\n                <template v-slot:column-from=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\"><router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link></div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link>\n                    </template>\n                </template>\n\n                <template v-slot:column-to=\"{ value, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\"><router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link></div>\n                    </div>\n                    <template v-else>\n                        <router-link :to=\"{name: 'address-detail', params: {id: value}}\" :title=\"value\">{{ value | formatHash }}</router-link>\n                    </template>\n                </template>\n\n                <template v-slot:column-amount=\"{ value, item, column }\">\n                    <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                        <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                        <div class=\"col\">\n                            <template v-if=\"addressCol\">\n                                <f-account-transaction-amount\n                                    :address=\"addressCol\"\n                                    :from=\"getFrom(item)\"\n                                    :to=\"getTo(item)\"\n                                    :amount=\"value\"\n                                />\n                            </template>\n                            <template v-else>\n                                <f-token-value :value=\"value\" :decimals=\"2\" :use-placeholder=\"false\" no-currency />\n                            </template>\n                        </div>\n                    </div>\n                    <template v-else>\n                        <template v-if=\"addressCol\">\n                            <f-account-transaction-amount\n                                :address=\"addressCol\"\n                                :from=\"getFrom(item)\"\n                                :to=\"getTo(item)\"\n                                :amount=\"value\"\n                            />\n                        </template>\n                        <template v-else>\n                            <f-token-value :value=\"value\" :decimals=\"2\" :use-placeholder=\"false\" no-currency />\n                        </template>\n                    </template>\n                </template>\n\n                <!--\n                            <template v-slot:column-fee=\"{ value, column }\">\n                                <div v-if=\"column\" class=\"row no-collapse no-vert-col-padding\">\n                                    <div class=\"col-5 f-row-label\">{{ column.label }}</div>\n                                    <div class=\"col\">{{ WEIToFTM(value | formatHexToInt) }}</div>\n                                </div>\n                                <template v-else>\n                                    {{ WEIToFTM(value | formatHexToInt) }}\n                                </template>\n                            </template>\n                -->\n\n                <template #subrow=\"{ item, columns, visibleColumnsNum, style, tabindex, dtItemId, mobileView }\">\n                    <template v-if=\"!mobileView\">\n                        <tr\n                            v-if=\"filterApprovals(item.transaction && item.transaction.tokenTransactions).length > 0\"\n                            :style=\"style\"\n                            :tabindex=\"tabindex\"\n                            :data-dt-item-id=\"dtItemId\"\n                            class=\"subrow\"\n                        >\n                            <td :colspan=\"visibleColumnsNum\" class=\"tokentxstd\">\n                                <div class=\"tokentxs\">\n                                    <token-transactions-list\n                                        :token-transactions=\"filterApprovals(item.transaction.tokenTransactions)\"\n                                        :address=\"addressCol\"\n                                    />\n                                </div>\n                            </td>\n                        </tr>\n                    </template>\n                    <template v-else>\n                        <details v-if=\"filterApprovals(item.transaction && item.transaction.tokenTransactions).length > 0\" class=\"tokentxs\">\n                            <summary>Details</summary>\n                            <token-transactions-list\n                                :token-transactions=\"filterApprovals(item.transaction.tokenTransactions)\"\n                                :address=\"addressCol\"\n                            />\n                        </details>\n                    </template>\n                </template>\n            </f-data-table>\n        </template>\n\n        <template v-else>\n            <div class=\"query-error\">{{ dTransactionListError }}</div>\n        </template>\n    </div>\n</template>\n\n<script>\n    import FDataTable from \"../components/core/FDataTable/FDataTable.vue\";\n    import gql from 'graphql-tag';\n    import { WEIToFTM } from \"../utils/transactions.js\";\n    import {formatHexToInt, timestampToDate, numToFixed, formatNumberByLocale} from \"../filters.js\";\n    import {getNestedProp} from \"../utils\";\n    import FAccountTransactionAmount from \"../components/FAccountTransactionAmount.vue\";\n    import FTokenValue from \"@/components/core/FTokenValue/FTokenValue.vue\";\n    import TokenTransactionsList from \"@/data-tables/TokenTransactionsList\";\n\n    export default {\n        components: {\n            FTokenValue,\n            FAccountTransactionAmount,\n            FDataTable,\n            TokenTransactionsList,\n        },\n\n        props: {\n            mobileView: {\n                type: Boolean,\n                default: false\n            },\n\n            /** No pagination, no 'transaction.' prefix on columns. */\n            withoutCursor: {\n                type: Boolean,\n                default: false\n            },\n\n            /** Use address column instead of columns `from` and `to`. */\n            addressCol: {\n                type: String,\n                default: ''\n            },\n\n            /** Array of column names to be hidden. */\n            hiddenColumns: {\n                type: Array,\n                default() {\n                    return [];\n                }\n            },\n\n            /**\n             * Data and action.\n             * Actions:\n             * '' - replace items\n             * 'append' - append new items\n             */\n            items: {\n                type: Object,\n                default() {\n                    return {\n                        action: '',\n                        data: []\n                    };\n                }\n            },\n\n            /** Number of items per page. */\n            itemsPerPage: {\n                type: Number,\n                default: 40\n            },\n\n            /** Display loading message. */\n            loading: {\n                type: Boolean,\n                default: false\n            },\n\n            /** If `true`, f-card element in data table will be without any style. */\n            fCardOff: {\n                type: Boolean,\n                default: false\n            }\n        },\n\n        apollo: {\n            transactions: {\n                query: gql`\n                    query TransactionList($cursor: Cursor, $count: Int!) {\n                        transactions (cursor: $cursor, count: $count) {\n                            pageInfo {\n                                first\n                                last\n                                hasNext\n                                hasPrevious\n                            }\n                            totalCount\n                            edges {\n                                cursor\n                                transaction {\n                                    hash\n                                    from\n                                    to\n                                    value\n                                    gasUsed\n                                    block {\n                                        number\n                                        timestamp\n                                    }\n                                    tokenTransactions {\n                                        trxIndex\n                                        tokenAddress\n                                        tokenName\n                                        tokenSymbol\n                                        tokenType\n                                        tokenId\n                                        tokenDecimals\n                                        type\n                                        sender\n                                        recipient\n                                        amount\n                                    }\n                                }\n                            }\n                        }\n                    }\n                `,\n                variables() {\n                    return {\n                        cursor: null,\n                        count: this.itemsPerPage\n                    }\n                },\n                skip() {\n                    return this.dOutsideData;\n                },\n                error(_error) {\n                    this.dTransactionListError = _error.message;\n                }\n            }\n        },\n\n        data() {\n            return {\n                dItems: [],\n                dHasNext: false,\n                dOutsideData: !!this.items.action,\n                dTransactionListError: '',\n                dColumns: [\n/*\n                    {\n                        name: 'created',\n                        readValueFrom: 'timestamp',\n                        hidden: !this.cMobileView\n                    },\n*/\n                    {\n                        name: 'hash',\n                        label: this.$t('view_transaction_list.tx_hash'),\n                        width: '200px',\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}hash`\n                    },\n/*\n                    {\n                        name: 'block',\n                        label: this.$t('view_transaction_list.block'),\n                        width: '100px',\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}block.number`,\n                        formatter: formatHexToInt,\n                        hidden: this.cMobileView\n                    },\n*/\n                    {\n                        name: 'timestamp',\n                        label: this.$t('view_transaction_list.time'),\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}block.timestamp`,\n                        // width: '220px',\n                        hidden: this.cMobileView\n                    },\n                    {\n                        name: 'address',\n                        label: this.$t('view_transaction_list.address'),\n                        // width: '460px',\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}from`,\n                        formatter: (_value, _item) => {\n                            // const from = getNestedProp(_item, `${!this.withoutCursor ? 'transaction.' : ''}from`);\n                            // const to = getNestedProp(_item, `${!this.withoutCursor ? 'transaction.' : ''}to`);\n                            const from = this.getFrom(_item);\n                            const to = this.getTo(_item);\n\n                            if (this.addressCol.toLowerCase() !== from.toLowerCase()) {\n                                return from;\n                            } else {\n                                return to;\n                            }\n                        },\n                        oneLineMode: true,\n                        hidden: !this.addressCol\n                        // width: '180px'\n                    },\n                    {\n                        name: 'from',\n                        label: this.$t('view_transaction_list.from'),\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}from`,\n                        hidden: !!this.addressCol\n                        // width: '180px'\n                    },\n                    {\n                        name: 'to',\n                        label: this.$t('view_transaction_list.to'),\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}to`,\n                        hidden: !!this.addressCol\n                        // width: '180px'\n                    },\n                    {\n                        name: 'gasUsed',\n                        label: this.$t('view_transaction_list.gas_used'),\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}gasUsed`,\n                        formatter: (_value) => formatHexToInt(_value),\n                        // width: '180px'\n                    },\n                    {\n                        name: 'amount',\n                        label: `${this.$t('view_transaction_list.amount')} (NEXT)`,\n                        itemProp: `${!this.withoutCursor ? 'transaction.' : ''}value`,\n                        formatter: _value => {\n                            // return formatNumberByLocale(numToFixed(WEIToFTM(_value), 2), 2)\n                            return WEIToFTM(_value);\n                        },\n                        width: '150px',\n                        css: {\n                            textAlign: 'right'\n                        }\n                    }\n/*\n                    {\n                        name: 'fee',\n                        label: `${this.$t('view_transaction_list.fee')} (NEXT)`,\n                        itemProp: 'gasUsed',\n                        width: '130px'\n                    }\n*/\n                ]\n            }\n        },\n\n        watch: {\n            items(_newItems) {\n                this.setItems(_newItems);\n            },\n\n            transactions(_data) {\n                this.$emit('records-count', formatHexToInt(_data.totalCount));\n\n                this.setItems({\n                    action: (this.appendItems ? 'append' : 'replace'),\n                    hasNext: _data.pageInfo.hasNext,\n                    data: _data.edges\n                });\n            },\n\n            /**\n             * Watch route change and reset some properties, if only route parameter changes (whole component is reused,\n             * not rendered from scratch!).\n             *\n             * @param {object} _to\n             * @param {object} _from\n             */\n            $route(_to, _from) {\n                if (_to.name === _from.name) {\n                    this.appendItems = false;\n                    this.dHasNext = false;\n                }\n            }\n        },\n\n        computed: {\n            /**\n             * Property is set to `true`, if 'transaction-list-dt-mobile-view' breakpoint is reached.\n             *\n             * @return {Boolean}\n             */\n            cMobileView() {\n                const dataTableBreakpoint = this.$store.state.breakpoints['transaction-list-dt-mobile-view'];\n\n                return (dataTableBreakpoint && dataTableBreakpoint.matches) || this.mobileView;\n            },\n\n            cLoading() {\n                return this.loading || this.$apollo.queries.transactions.loading;\n            }\n        },\n\n        created() {\n            /** If `true`, transaction items will be appended. */\n            this.appendItems = false;\n        },\n\n        methods: {\n            setItems(_items) {\n                const {action, data, hasNext} = _items;\n\n                if (action === 'replace') {\n                    this.dItems = data;\n                } else if (action === 'append') {\n                    for (let i = 0, len1 = data.length; i < len1; i++) {\n                        this.dItems.push(data[i]);\n                    }\n                } else {\n                    throw new Error(`Unknown items action '${action}'`);\n                }\n\n                this.dHasNext = !!hasNext;\n            },\n\n            /**\n             * Get item's 'from' value.\n             *\n             * @param {Object} _item\n             * @return {*}\n             */\n            getFrom(_item) {\n                return getNestedProp(_item, `${!this.withoutCursor ? 'transaction.' : ''}from`)\n            },\n\n            /**\n             * Get item's 'to' value.\n             *\n             * @param {Object} _item\n             * @return {*}\n             */\n            getTo(_item) {\n                return getNestedProp(_item, `${!this.withoutCursor ? 'transaction.' : ''}to`)\n            },\n\n            onFetchMore() {\n                const {transactions} = this;\n\n                if (this.dOutsideData) {\n                    this.$emit('fetch-more');\n                } else {\n                    if (transactions && transactions.pageInfo && transactions.pageInfo.hasNext) {\n                        const cursor = transactions.pageInfo.last;\n\n                        this.$apollo.queries.transactions.fetchMore({\n                            variables: {\n                                cursor,\n                                count: this.itemsPerPage\n                            },\n                            updateQuery: (previousResult, { fetchMoreResult }) => {\n                                this.appendItems = true;\n\n                                return fetchMoreResult;\n                            }\n                        });\n                    }\n                }\n            },\n\n            filterApprovals(tokenTransactions) {\n                return (tokenTransactions || []).filter(tx => tx.type !== 'APPROVAL');\n            },\n\n            WEIToFTM,\n            timestampToDate,\n            numToFixed,\n            formatNumberByLocale\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n.transaction-list-dt {\n\n    .tokentxs {\n        margin-top: -20px;\n    }\n\n    .tokentxs summary {\n        cursor: pointer;\n    }\n\n    .token-transaction-item {\n        margin-left: 200px;\n    }\n\n    .mobile-item {\n        .tokentxs {\n            margin-top: 0;\n\n            .token-transaction-item {\n                line-height: 0.8;\n                margin-bottom: 16px;\n                margin-left: 0;\n\n                a {\n                    max-width: 120px;\n                }\n            }\n        }\n    }\n}\n</style>\n"]}]}