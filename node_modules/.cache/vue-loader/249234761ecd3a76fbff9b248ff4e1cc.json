{"remainingRequest":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/websites/ex.nextsmartchain.com/src/components/core/FForm/FForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/websites/ex.nextsmartchain.com/src/components/core/FForm/FForm.vue","mtime":1657708592826},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/babel-loader/lib/index.js","mtime":1655491285588},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/cache-loader/dist/cjs.js","mtime":1655491106804},{"path":"/mnt/websites/ex.nextsmartchain.com/node_modules/vue-loader/lib/index.js","mtime":1657708714280}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBldmVudHMgZnJvbSAnLi4vLi4vLi4vbWl4aW5zL2V2ZW50cy5qcyc7CmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuLi8uLi8uLi91dGlscyc7CmltcG9ydCB7IGV2ZW50QnVzTWl4aW4gfSBmcm9tICcuLi8uLi8uLi9taXhpbnMvZXZlbnQtYnVzLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG1peGluczogW2V2ZW50cywgZXZlbnRCdXNNaXhpbl0sCgogICAgcHJvcHM6IHsKICAgICAgICAvKiogU3VibWl0IGZvcm0gd2hlbiBhbiBlbGVtZW50IGlzIGNoYW5nZWQgKi8KICAgICAgICBzdWJtaXRPbkNoYW5nZTogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIC8qKiBDYWxsIHByZXZlbnREZWZhdWx0KCkgb24gZm9ybSBzdWJtaXQgZXZlbnQuICovCiAgICAgICAgY2FuY2VsU3VibWl0OiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICAgICAgfSwKICAgICAgICAvKiogQ2VudGVyIGZvcm0gYm9keS4gKi8KICAgICAgICBjZW50ZXJGb3JtOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIH0sCiAgICB9LAoKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogUmVmZXJlbmNlIHRvIGxhc3QgY2hhbmdlZCBmb3JtIGVsZW1lbnQKICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9CiAgICAgICAgICovCiAgICAgICAgdGhpcy5fbGFzdENoYW5nZWRFbGVtID0gbnVsbDsKICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0gPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCdmb3JtJykgfHwgdGhpcy4kZWw7CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICAvKioKICAgICAgICAgKiBHZXQgZm9ybSBlbGVtZW50IGJ5IGl0cyBuYW1lLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IF9uYW1lCiAgICAgICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR8bnVsbH0KICAgICAgICAgKi8KICAgICAgICBnZXRFbGVtZW50KF9uYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGVGb3JtID0gdGhpcy4kcmVmcy5mb3JtOwoKICAgICAgICAgICAgaWYgKF9uYW1lICYmIGVGb3JtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZUZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9JHtfbmFtZX1dYCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIEdldCBmb3JtIGVsZW1lbnRzIGJ5IG5hbWVzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW19uYW1lc10gRm9ybSBlbGVtZW50cyBuYW1lcy4KICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbX2NvbnRhaW5lcl0KICAgICAgICAgKiBAcmV0dXJuIHtOb2RlTGlzdE9mPEhUTUxFbGVtZW50VGFnTmFtZU1hcFtzdHJpbmddPiB8IE5vZGVMaXN0T2Y8RWxlbWVudD4gfCBOb2RlTGlzdE9mPFNWR0VsZW1lbnRUYWdOYW1lTWFwW3N0cmluZ10+IHwgKn0KICAgICAgICAgKi8KICAgICAgICBnZXRFbGVtZW50cyhfbmFtZXMsIF9jb250YWluZXIpIHsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gX2NvbnRhaW5lciB8fCB0aGlzLiRyZWZzLmZvcm07CgogICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoCiAgICAgICAgICAgICAgICBpc0FycmF5KF9uYW1lcykgPyBfbmFtZXMubWFwKChfbmFtZSkgPT4gYFtuYW1lPSIke19uYW1lfSJdYCkuam9pbignLCcpIDogJ1tuYW1lXScKICAgICAgICAgICAgKTsKICAgICAgICB9LAoKICAgICAgICBnZXRFbGVtZW50VmFsdWUoX2VsZW0pIHsKICAgICAgICAgICAgbGV0IHZhbHVlID0gbnVsbDsKCiAgICAgICAgICAgIGlmICghX2VsZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFfZWxlbS5kaXNhYmxlZCkgewogICAgICAgICAgICAgICAgLy8gJiYgIV9lbGVtLmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKSkgewogICAgICAgICAgICAgICAgaWYgKF9lbGVtLm5vZGVOYW1lID09PSAnSU5QVVQnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9lbGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgX2VsZW0udHlwZSA9PT0gJ3JhZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2VsZW0uY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfZWxlbS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhbHVlID0gKF9lbGVtLnZhbHVlID09PSAnb24nID8gdHJ1ZSA6IF9lbGVtLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydChfZWxlbS5jaGVja2VkICsgJyAnICsgdmFsdWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2VsZW0udHlwZSA9PT0gJ2ZpbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX2VsZW0uZmlsZXM7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfZWxlbS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX2VsZW0udmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBbX25hbWVzXSBGb3JtIGVsZW1lbnRzIG5hbWVzLgogICAgICAgICAqIEByZXR1cm4ge09iamVjdH0KICAgICAgICAgKi8KICAgICAgICBnZXRFbGVtZW50c1ZhbHVlcyhfbmFtZXMpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHt9OwoKICAgICAgICAgICAgdGhpcy5nZXRFbGVtZW50cyhfbmFtZXMpLmZvckVhY2goKF9lbGVtKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0RWxlbWVudFZhbHVlKF9lbGVtKTsKCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgX2VsZW0ubmFtZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfZWxlbS5uYW1lIGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoZGF0YVtfZWxlbS5uYW1lXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbX2VsZW0ubmFtZV0ucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW19lbGVtLm5hbWVdID0gW2RhdGFbX2VsZW0ubmFtZV0sIHZhbHVlXTsgLy8gPz8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbX2VsZW0ubmFtZV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogU3VibWl0IGZvcm0uCiAgICAgICAgICovCiAgICAgICAgc3VibWl0KCkgewogICAgICAgICAgICBjb25zdCBlRm9ybSA9IHRoaXMuJHJlZnMuZm9ybTsKICAgICAgICAgICAgbGV0IGVTdWJtaXRCdG4gPSBlRm9ybS5xdWVyeVNlbGVjdG9yKCdbdHlwZT0ic3VibWl0Il0nKTsKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICBpZiAoIWVTdWJtaXRCdG4pIHsKICAgICAgICAgICAgICAgICAgICBlU3VibWl0QnRuID0gY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdidXR0b24nLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VibWl0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnZGlzcGxheTogbm9uZTsnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgZUZvcm0uYXBwZW5kQ2hpbGQoZVN1Ym1pdEJ0bik7CiAgICAgICAgICAgICAgICB9CiovCgogICAgICAgICAgICBlU3VibWl0QnRuLmNsaWNrKCk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogUmVzZXQgZm9ybS4KICAgICAgICAgKi8KICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCk7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlcygpIHsKICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IFtdOwogICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMuJHJlZnMuZm9ybS5lbGVtZW50czsKICAgICAgICAgICAgbGV0IGVsZW07CgogICAgICAgICAgICBpZiAoZWxlbWVudHMpIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4xID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IGVsZW1lbnRzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLm5hbWUgJiYgZWxlbS53aWxsVmFsaWRhdGUgJiYgIWVsZW0uY2hlY2tWYWxpZGl0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsZW0ubmFtZSwgZWxlbS52YWxpZGl0eSwgZWxlbS52YWxpZGF0aW9uTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZXMucHVzaChlbGVtLnZhbGlkYXRpb25NZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlcnJvck1lc3NhZ2VzOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIENoZWNrIGZvcm0gdmFsaWRpdHkuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufQogICAgICAgICAqLwogICAgICAgIGNoZWNrVmFsaWRpdHkoKSB7CiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47CiAgICAgICAgICAgIGxldCB2YWxpZCA9IHRydWU7CiAgICAgICAgICAgIGxldCBjaGlsZDsKCiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0pIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4xID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkLnZhbGlkYXRlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnZhbGlkYXRlKHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YWxpZCA9IHRoaXMuJHJlZnMuZm9ybS5jaGVja1ZhbGlkaXR5KCk7CiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcygpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50QnVzLmVtaXQoJ2FyaWEtYWxlcnQtcmVwbGFjZScsIGVycm9yTWVzc2FnZXMuam9pbignJykpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0Q3VzdG9tRXZlbnQoJ2YtZm9ybS1ub3QtdmFsaWQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB2YWxpZDsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBUcmlnZ2VyZWQgd2hlbiBmb3JtIGVsZW1lbnQgY2hhbmdlcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IF9ldmVudAogICAgICAgICAqLwogICAgICAgIG9uQ2hhbmdlKF9ldmVudCkgewogICAgICAgICAgICAvLyB0aGlzLmdldEVsZW1lbnRWYWx1ZSgpCiAgICAgICAgICAgIHRoaXMuZW1pdEN1c3RvbUV2ZW50KCdmLWZvcm0tY2hhbmdlJywgewogICAgICAgICAgICAgICAgZVRhcmdldDogX2V2ZW50LnRhcmdldCwKICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldEVsZW1lbnRWYWx1ZShfZXZlbnQudGFyZ2V0KSwKICAgICAgICAgICAgICAgIC8vIG9yaWdpbmFsRXZlbnQ6IF9ldmVudAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmICh0aGlzLnN1Ym1pdE9uQ2hhbmdlKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q2hhbmdlZEVsZW0gPSBfZXZlbnQudGFyZ2V0OwoKICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0KCk7CgogICAgICAgICAgICAgICAgdGhpcy5fbGFzdENoYW5nZWRFbGVtID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIFRyaWdnZXJlZCBvbiBmb3JtIHN1Ym1pdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IF9ldmVudAogICAgICAgICAqLwogICAgICAgIG9uU3VibWl0KF9ldmVudCkgewogICAgICAgICAgICBpZiAodGhpcy5jYW5jZWxTdWJtaXQpIHsKICAgICAgICAgICAgICAgIF9ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAhdGhpcy5jaGVja1ZhbGlkaXR5KCkgfHwKICAgICAgICAgICAgICAgICF0aGlzLmVtaXRDdXN0b21FdmVudCgnZi1mb3JtLXN1Ym1pdCcsIHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldEVsZW1lbnRzVmFsdWVzKCksCiAgICAgICAgICAgICAgICAgICAgbGFzdENoYW5nZWRFbGVtOiB0aGlzLl9sYXN0Q2hhbmdlZEVsZW0sCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiB0aGlzLl9zdWJtaXRBY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiB0aGlzLm1ldGhvZCwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgX2V2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgdGhpcy5fc3VibWl0QWN0aW9uID0gdGhpcy5hY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBUcmlnZ2VyZWQgb24gZm9ybSBlbGVtZW50IGlucHV0IGV2ZW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gX2V2ZW50CiAgICAgICAgICovCiAgICAgICAgb25JbnB1dChfZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5lbWl0Q3VzdG9tRXZlbnQoJ2YtZm9ybS1pbnB1dCcsIHsKICAgICAgICAgICAgICAgIGVUYXJnZXQ6IF9ldmVudC50YXJnZXQsCiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5nZXRFbGVtZW50VmFsdWUoX2V2ZW50LnRhcmdldCksCiAgICAgICAgICAgICAgICAvLyBvcmlnaW5hbEV2ZW50OiBfZXZlbnQKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["FForm.vue"],"names":[],"mappings":";AAgBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FForm.vue","sourceRoot":"src/components/core/FForm","sourcesContent":["<template>\n    <form\n        ref=\"form\"\n        method=\"post\"\n        class=\"f-form\"\n        :class=\"{ 'center-form': centerForm }\"\n        novalidate\n        @submit=\"onSubmit\"\n        @change=\"onChange\"\n        @input=\"onInput\"\n    >\n        <slot></slot>\n    </form>\n</template>\n\n<script>\nimport events from '../../../mixins/events.js';\nimport { isArray } from '../../../utils';\nimport { eventBusMixin } from '../../../mixins/event-bus.js';\n\nexport default {\n    mixins: [events, eventBusMixin],\n\n    props: {\n        /** Submit form when an element is changed */\n        submitOnChange: {\n            type: Boolean,\n            default: false,\n        },\n        /** Call preventDefault() on form submit event. */\n        cancelSubmit: {\n            type: Boolean,\n            default: true,\n        },\n        /** Center form body. */\n        centerForm: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    created() {\n        /**\n         * Reference to last changed form element\n         * @type {HTMLElement}\n         */\n        this._lastChangedElem = null;\n    },\n\n    mounted() {\n        this.$refs.form = this.$el.querySelector('form') || this.$el;\n    },\n\n    methods: {\n        /**\n         * Get form element by its name.\n         *\n         * @param {String} _name\n         * @return {HTMLElement|null}\n         */\n        getElement(_name) {\n            const eForm = this.$refs.form;\n\n            if (_name && eForm) {\n                return eForm.querySelector(`[name=${_name}]`);\n            }\n\n            return null;\n        },\n\n        /**\n         * Get form elements by names.\n         *\n         * @param {Array} [_names] Form elements names.\n         * @param {HTMLElement} [_container]\n         * @return {NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element> | NodeListOf<SVGElementTagNameMap[string]> | *}\n         */\n        getElements(_names, _container) {\n            const container = _container || this.$refs.form;\n\n            return container.querySelectorAll(\n                isArray(_names) ? _names.map((_name) => `[name=\"${_name}\"]`).join(',') : '[name]'\n            );\n        },\n\n        getElementValue(_elem) {\n            let value = null;\n\n            if (!_elem) {\n                return value;\n            }\n\n            if (!_elem.disabled) {\n                // && !_elem.hasAttribute('readonly')) {\n                if (_elem.nodeName === 'INPUT') {\n                    if (_elem.type === 'checkbox' || _elem.type === 'radio') {\n                        if (_elem.checked) {\n                            value = _elem.value;\n                            // value = (_elem.value === 'on' ? true : _elem.value);\n                        }\n                        // alert(_elem.checked + ' ' + value);\n                    } else if (_elem.type === 'file') {\n                        value = _elem.files;\n                    } else {\n                        value = _elem.value;\n                    }\n                } else {\n                    value = _elem.value;\n                }\n            }\n\n            return value;\n        },\n\n        /**\n         * @param {Array} [_names] Form elements names.\n         * @return {Object}\n         */\n        getElementsValues(_names) {\n            const data = {};\n\n            this.getElements(_names).forEach((_elem) => {\n                const value = this.getElementValue(_elem);\n\n                if (value !== null && _elem.name) {\n                    if (_elem.name in data) {\n                        if (isArray(data[_elem.name])) {\n                            data[_elem.name].push(value);\n                        } else {\n                            data[_elem.name] = [data[_elem.name], value]; // ??\n                        }\n                    } else {\n                        data[_elem.name] = value;\n                    }\n                }\n            });\n\n            return data;\n        },\n\n        /**\n         * Submit form.\n         */\n        submit() {\n            const eForm = this.$refs.form;\n            let eSubmitBtn = eForm.querySelector('[type=\"submit\"]');\n\n            /*\n                if (!eSubmitBtn) {\n                    eSubmitBtn = createElement({\n                        name: 'button',\n                        attributes: {\n                            type: 'submit',\n                            style: 'display: none;'\n                        }\n                    });\n\n                    eForm.appendChild(eSubmitBtn);\n                }\n*/\n\n            eSubmitBtn.click();\n        },\n\n        /**\n         * Reset form.\n         */\n        reset() {\n            this.$refs.form.reset();\n        },\n\n        getErrorMessages() {\n            const errorMessages = [];\n            const elements = this.$refs.form.elements;\n            let elem;\n\n            if (elements) {\n                for (let i = 0, len1 = elements.length; i < len1; i++) {\n                    elem = elements[i];\n                    if (elem.name && elem.willValidate && !elem.checkValidity()) {\n                        // console.log(elem.name, elem.validity, elem.validationMessage);\n                        errorMessages.push(elem.validationMessage);\n                    }\n                }\n            }\n\n            return errorMessages;\n        },\n\n        /**\n         * Check form validity.\n         *\n         * @return {Boolean}\n         */\n        checkValidity() {\n            const children = this.$children;\n            let valid = true;\n            let child;\n\n            if (this.$refs.form) {\n                for (let i = 0, len1 = children.length; i < len1; i++) {\n                    child = children[i];\n                    if (typeof child.validate === 'function') {\n                        child.validate(true);\n                    }\n                }\n\n                valid = this.$refs.form.checkValidity();\n                if (!valid) {\n                    const errorMessages = this.getErrorMessages();\n\n                    if (errorMessages.length > 0) {\n                        this._eventBus.emit('aria-alert-replace', errorMessages.join(''));\n                    }\n\n                    this.emitCustomEvent('f-form-not-valid');\n                }\n\n                return valid;\n            }\n\n            return valid;\n        },\n\n        /**\n         * Triggered when form element changes.\n         *\n         * @param {Event} _event\n         */\n        onChange(_event) {\n            // this.getElementValue()\n            this.emitCustomEvent('f-form-change', {\n                eTarget: _event.target,\n                value: this.getElementValue(_event.target),\n                // originalEvent: _event\n            });\n\n            if (this.submitOnChange) {\n                this._lastChangedElem = _event.target;\n\n                this.submit();\n\n                this._lastChangedElem = null;\n            }\n        },\n\n        /**\n         * Triggered on form submit.\n         *\n         * @param {Event} _event\n         */\n        onSubmit(_event) {\n            if (this.cancelSubmit) {\n                _event.preventDefault();\n            }\n\n            if (\n                !this.checkValidity() ||\n                !this.emitCustomEvent('f-form-submit', {\n                    data: this.getElementsValues(),\n                    lastChangedElem: this._lastChangedElem,\n                    action: this._submitAction,\n                    method: this.method,\n                })\n            ) {\n                _event.preventDefault();\n\n                this._submitAction = this.action;\n            }\n        },\n\n        /**\n         * Triggered on form element input event.\n         *\n         * @param {Event} _event\n         */\n        onInput(_event) {\n            this.emitCustomEvent('f-form-input', {\n                eTarget: _event.target,\n                value: this.getElementValue(_event.target),\n                // originalEvent: _event\n            });\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'style';\n</style>\n"]}]}